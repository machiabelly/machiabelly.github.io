{
  "version": 3,
  "sources": ["../../@polygonjs/polygonjs/dist/src/engine/nodes/sop/_Base.js"],
  "sourcesContent": ["\"use strict\";\nimport { TypedNode } from \"../_Base\";\nimport { CoreGroup } from \"../../../core/geometry/Group\";\nimport { ObjectType } from \"../../../core/geometry/Constant\";\nimport { NodeContext } from \"../../poly/NodeContext\";\nimport { FlagsControllerDBO } from \"../utils/FlagsController\";\nimport { BaseSopOperation } from \"../../operations/sop/_Base\";\nimport { CoreObjectType } from \"../../../core/geometry/ObjectContent\";\nexport class TypedSopNode extends TypedNode {\n  constructor() {\n    super(...arguments);\n    this.flags = new FlagsControllerDBO(this);\n  }\n  static context() {\n    return NodeContext.SOP;\n  }\n  dataType() {\n    return CoreObjectType.THREEJS;\n  }\n  initializeBaseNode() {\n    this.flags.display.set(false);\n    this.flags.display.onUpdate(() => {\n      if (!this.flags.display.active()) {\n        return;\n      }\n      const parent = this.parent();\n      if (!(parent && parent.displayNodeController)) {\n        return;\n      }\n      parent.displayNodeController.setDisplayNode(this);\n    });\n    this.io.outputs.setHasOneOutput();\n  }\n  //\n  // ALL OBJECTS\n  //\n  //\n  // THREEJS OBJECTS\n  //\n  setCoreGroup(coreGroup) {\n    this._setContainer(\n      coreGroup\n      /*, MESSAGE.FROM_SET_CORE_GROUP*/\n    );\n  }\n  setObject(object) {\n    this._setContainerObjects(\n      [object]\n      /*, MESSAGE.FROM_SET_OBJECT*/\n    );\n  }\n  setObjects(objects) {\n    this._setContainerObjects(\n      objects\n      /*, MESSAGE.FROM_SET_OBJECTS*/\n    );\n  }\n  setGeometry(geometry, type = ObjectType.MESH) {\n    const object = this.createObject(geometry, type);\n    this._setContainerObjects(\n      object ? [object] : []\n      /*, MESSAGE.FROM_SET_GEOMETRY*/\n    );\n  }\n  setGeometries(geometries, type = ObjectType.MESH) {\n    const objects = [];\n    for (const geometry of geometries) {\n      const object = this.createObject(geometry, type);\n      if (object) {\n        objects.push(object);\n      }\n    }\n    this._setContainerObjects(\n      objects\n      /*, MESSAGE.FROM_SET_GEOMETRIES*/\n    );\n  }\n  // protected _setContainerAllObjects(objects: Object3D[] /*, message: MESSAGE*/) {\n  // \tconst coreGroup = this.containerController.container().coreContent() || new CoreGroup();\n  // \tcoreGroup.setAllObjects(objects);\n  // \tthis._setContainer(coreGroup);\n  // }\n  _setContainerObjects(objects) {\n    const coreGroup = this.containerController.container().coreContent() || new CoreGroup();\n    coreGroup.setAllObjects(objects);\n    this._setContainer(coreGroup);\n  }\n  static createObject(geometry, type, material) {\n    return BaseSopOperation.createObject(geometry, type, material);\n  }\n  createObject(geometry, type, material) {\n    return TypedSopNode.createObject(geometry, type, material);\n  }\n  static createIndexIfNone(geometry) {\n    BaseSopOperation.createIndexIfNone(geometry);\n  }\n  _createIndexIfNone(geometry) {\n    TypedSopNode.createIndexIfNone(geometry);\n  }\n}\nexport class BaseSopNodeClass extends TypedSopNode {\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAQO,IAAM,eAAN,MAAM,sBAAqB,UAAU;AAAA,EAC1C,cAAc;AACZ,UAAM,GAAG,SAAS;AAClB,SAAK,QAAQ,IAAI,mBAAmB,IAAI;AAAA,EAC1C;AAAA,EACA,OAAO,UAAU;AACf,WAAO,YAAY;AAAA,EACrB;AAAA,EACA,WAAW;AACT,WAAO,eAAe;AAAA,EACxB;AAAA,EACA,qBAAqB;AACnB,SAAK,MAAM,QAAQ,IAAI,KAAK;AAC5B,SAAK,MAAM,QAAQ,SAAS,MAAM;AAChC,UAAI,CAAC,KAAK,MAAM,QAAQ,OAAO,GAAG;AAChC;AAAA,MACF;AACA,YAAM,SAAS,KAAK,OAAO;AAC3B,UAAI,EAAE,UAAU,OAAO,wBAAwB;AAC7C;AAAA,MACF;AACA,aAAO,sBAAsB,eAAe,IAAI;AAAA,IAClD,CAAC;AACD,SAAK,GAAG,QAAQ,gBAAgB;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,aAAa,WAAW;AACtB,SAAK;AAAA,MACH;AAAA;AAAA,IAEF;AAAA,EACF;AAAA,EACA,UAAU,QAAQ;AAChB,SAAK;AAAA,MACH,CAAC,MAAM;AAAA;AAAA,IAET;AAAA,EACF;AAAA,EACA,WAAW,SAAS;AAClB,SAAK;AAAA,MACH;AAAA;AAAA,IAEF;AAAA,EACF;AAAA,EACA,YAAY,UAAU,OAAO,WAAW,MAAM;AAC5C,UAAM,SAAS,KAAK,aAAa,UAAU,IAAI;AAC/C,SAAK;AAAA,MACH,SAAS,CAAC,MAAM,IAAI,CAAC;AAAA;AAAA,IAEvB;AAAA,EACF;AAAA,EACA,cAAc,YAAY,OAAO,WAAW,MAAM;AAChD,UAAM,UAAU,CAAC;AACjB,eAAW,YAAY,YAAY;AACjC,YAAM,SAAS,KAAK,aAAa,UAAU,IAAI;AAC/C,UAAI,QAAQ;AACV,gBAAQ,KAAK,MAAM;AAAA,MACrB;AAAA,IACF;AACA,SAAK;AAAA,MACH;AAAA;AAAA,IAEF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,qBAAqB,SAAS;AAC5B,UAAM,YAAY,KAAK,oBAAoB,UAAU,EAAE,YAAY,KAAK,IAAI,UAAU;AACtF,cAAU,cAAc,OAAO;AAC/B,SAAK,cAAc,SAAS;AAAA,EAC9B;AAAA,EACA,OAAO,aAAa,UAAU,MAAM,UAAU;AAC5C,WAAO,iBAAiB,aAAa,UAAU,MAAM,QAAQ;AAAA,EAC/D;AAAA,EACA,aAAa,UAAU,MAAM,UAAU;AACrC,WAAO,cAAa,aAAa,UAAU,MAAM,QAAQ;AAAA,EAC3D;AAAA,EACA,OAAO,kBAAkB,UAAU;AACjC,qBAAiB,kBAAkB,QAAQ;AAAA,EAC7C;AAAA,EACA,mBAAmB,UAAU;AAC3B,kBAAa,kBAAkB,QAAQ;AAAA,EACzC;AACF;",
  "names": []
}
