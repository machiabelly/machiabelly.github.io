{
  "version": 3,
  "sources": ["../../@polygonjs/polygonjs/dist/src/engine/nodes/obj/_Base.js"],
  "sourcesContent": ["\"use strict\";\nimport { Object3D } from \"three\";\nimport { TypedNode } from \"../_Base\";\nimport { NodeContext } from \"../../poly/NodeContext\";\nimport { Group } from \"three\";\nimport { Poly } from \"../../Poly\";\nexport var ObjNodeRenderOrder = /* @__PURE__ */ ((ObjNodeRenderOrder2) => {\n  ObjNodeRenderOrder2[ObjNodeRenderOrder2[\"MANAGER\"] = 0] = \"MANAGER\";\n  ObjNodeRenderOrder2[ObjNodeRenderOrder2[\"CAMERA\"] = 2] = \"CAMERA\";\n  ObjNodeRenderOrder2[ObjNodeRenderOrder2[\"LIGHT\"] = 3] = \"LIGHT\";\n  return ObjNodeRenderOrder2;\n})(ObjNodeRenderOrder || {});\nexport class TypedObjNode extends TypedNode {\n  constructor() {\n    super(...arguments);\n    this.renderOrder = 0 /* MANAGER */;\n    this._children_group = this._create_children_group();\n    this._attachableToHierarchy = true;\n    this._usedInScene = true;\n  }\n  static context() {\n    return NodeContext.OBJ;\n  }\n  _create_children_group() {\n    const group = new Group();\n    group.matrixAutoUpdate = false;\n    return group;\n  }\n  attachableToHierarchy() {\n    return this._attachableToHierarchy;\n  }\n  usedInScene() {\n    return this._usedInScene && this.disposed() == false;\n  }\n  // TODO call set_used_in_scene(false) when node is deleted\n  // set_used_in_scene(state: boolean) {\n  // \tthis._used_in_scene = state;\n  // \tif (!this.scene.loading_controller.isLoading()) {\n  // \t\tconst root = this.parent as ObjectsManagerNode;\n  // \t\tif (root) {\n  // \t\t\troot.update_object(this);\n  // \t\t}\n  // \t}\n  // }\n  addObjectToParent(parent) {\n    if (this.attachableToHierarchy()) {\n      parent.add(this.object);\n      Poly.onObjectsAddRemoveHooks.runOnAddHookOnObject(this._scene, this.object);\n    }\n  }\n  removeObjectFromParent() {\n    if (this.attachableToHierarchy()) {\n      const parent = this.object.parent;\n      if (parent) {\n        Poly.onObjectsAddRemoveHooks.runOnRemoveHookOnObject(this._scene, this.object);\n        parent.remove(this.object);\n      }\n    }\n  }\n  dispose() {\n    var _a;\n    super.dispose();\n    (_a = this.childrenDisplayController) == null ? void 0 : _a.dispose();\n  }\n  initializeBaseNode() {\n    this._object = this._create_object_with_attributes();\n    this.nameController.add_post_set_fullPath_hook(this.set_object_name.bind(this));\n    this.set_object_name();\n  }\n  childrenGroup() {\n    return this._children_group;\n  }\n  get object() {\n    return this._object;\n  }\n  _create_object_with_attributes() {\n    const object = this.createObject();\n    object.node = this;\n    object.add(this._children_group);\n    return object;\n  }\n  set_object_name() {\n    if (this._object) {\n      this._object.name = this.path();\n      this._children_group.name = `${this.path()}:parentedOutputs`;\n    }\n  }\n  createObject() {\n    const object = new Object3D();\n    object.matrixAutoUpdate = false;\n    return object;\n  }\n  isDisplayNodeCooking() {\n    var _a, _b, _c;\n    if ((_b = (_a = this.flags) == null ? void 0 : _a.display) == null ? void 0 : _b.active()) {\n      const displayNode = (_c = this.displayNodeController) == null ? void 0 : _c.displayNode();\n      if (displayNode) {\n        return displayNode.cookController.isCooking();\n      }\n    }\n    return false;\n  }\n  isDisplayed() {\n    var _a, _b;\n    return ((_b = (_a = this.flags) == null ? void 0 : _a.display) == null ? void 0 : _b.active()) || false;\n  }\n}\nexport class BaseObjNodeClass extends TypedObjNode {\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;AAMO,IAAI,sBAAsC,CAAC,wBAAwB;AACxE,sBAAoB,oBAAoB,SAAS,IAAI,CAAC,IAAI;AAC1D,sBAAoB,oBAAoB,QAAQ,IAAI,CAAC,IAAI;AACzD,sBAAoB,oBAAoB,OAAO,IAAI,CAAC,IAAI;AACxD,SAAO;AACT,GAAG,sBAAsB,CAAC,CAAC;AACpB,IAAM,eAAN,cAA2B,UAAU;AAAA,EAC1C,cAAc;AACZ,UAAM,GAAG,SAAS;AAClB,SAAK,cAAc;AACnB,SAAK,kBAAkB,KAAK,uBAAuB;AACnD,SAAK,yBAAyB;AAC9B,SAAK,eAAe;AAAA,EACtB;AAAA,EACA,OAAO,UAAU;AACf,WAAO,YAAY;AAAA,EACrB;AAAA,EACA,yBAAyB;AACvB,UAAM,QAAQ,IAAI,MAAM;AACxB,UAAM,mBAAmB;AACzB,WAAO;AAAA,EACT;AAAA,EACA,wBAAwB;AACtB,WAAO,KAAK;AAAA,EACd;AAAA,EACA,cAAc;AACZ,WAAO,KAAK,gBAAgB,KAAK,SAAS,KAAK;AAAA,EACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,kBAAkB,QAAQ;AACxB,QAAI,KAAK,sBAAsB,GAAG;AAChC,aAAO,IAAI,KAAK,MAAM;AACtB,WAAK,wBAAwB,qBAAqB,KAAK,QAAQ,KAAK,MAAM;AAAA,IAC5E;AAAA,EACF;AAAA,EACA,yBAAyB;AACvB,QAAI,KAAK,sBAAsB,GAAG;AAChC,YAAM,SAAS,KAAK,OAAO;AAC3B,UAAI,QAAQ;AACV,aAAK,wBAAwB,wBAAwB,KAAK,QAAQ,KAAK,MAAM;AAC7E,eAAO,OAAO,KAAK,MAAM;AAAA,MAC3B;AAAA,IACF;AAAA,EACF;AAAA,EACA,UAAU;AACR,QAAI;AACJ,UAAM,QAAQ;AACd,KAAC,KAAK,KAAK,8BAA8B,OAAO,SAAS,GAAG,QAAQ;AAAA,EACtE;AAAA,EACA,qBAAqB;AACnB,SAAK,UAAU,KAAK,+BAA+B;AACnD,SAAK,eAAe,2BAA2B,KAAK,gBAAgB,KAAK,IAAI,CAAC;AAC9E,SAAK,gBAAgB;AAAA,EACvB;AAAA,EACA,gBAAgB;AACd,WAAO,KAAK;AAAA,EACd;AAAA,EACA,IAAI,SAAS;AACX,WAAO,KAAK;AAAA,EACd;AAAA,EACA,iCAAiC;AAC/B,UAAM,SAAS,KAAK,aAAa;AACjC,WAAO,OAAO;AACd,WAAO,IAAI,KAAK,eAAe;AAC/B,WAAO;AAAA,EACT;AAAA,EACA,kBAAkB;AAChB,QAAI,KAAK,SAAS;AAChB,WAAK,QAAQ,OAAO,KAAK,KAAK;AAC9B,WAAK,gBAAgB,OAAO,GAAG,KAAK,KAAK,CAAC;AAAA,IAC5C;AAAA,EACF;AAAA,EACA,eAAe;AACb,UAAM,SAAS,IAAI,SAAS;AAC5B,WAAO,mBAAmB;AAC1B,WAAO;AAAA,EACT;AAAA,EACA,uBAAuB;AACrB,QAAI,IAAI,IAAI;AACZ,SAAK,MAAM,KAAK,KAAK,UAAU,OAAO,SAAS,GAAG,YAAY,OAAO,SAAS,GAAG,OAAO,GAAG;AACzF,YAAM,eAAe,KAAK,KAAK,0BAA0B,OAAO,SAAS,GAAG,YAAY;AACxF,UAAI,aAAa;AACf,eAAO,YAAY,eAAe,UAAU;AAAA,MAC9C;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EACA,cAAc;AACZ,QAAI,IAAI;AACR,aAAS,MAAM,KAAK,KAAK,UAAU,OAAO,SAAS,GAAG,YAAY,OAAO,SAAS,GAAG,OAAO,MAAM;AAAA,EACpG;AACF;",
  "names": []
}
