(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_panels_paramsStack_ParamsStack_vue"],{

/***/ 67413:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

const { createElementVNode: _createElementVNode, openBlock: _openBlock, createElementBlock: _createElementBlock } = __webpack_require__(61043)

module.exports = function render(_ctx, _cache) {
  return (_openBlock(), _createElementBlock("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    "stroke-width": "1.5",
    stroke: "currentColor",
    "aria-hidden": "true"
  }, [
    _createElementVNode("path", {
      "stroke-linecap": "round",
      "stroke-linejoin": "round",
      d: "M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"
    })
  ]))
}

/***/ }),

/***/ 90532:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

const { createElementVNode: _createElementVNode, openBlock: _openBlock, createElementBlock: _createElementBlock } = __webpack_require__(61043)

module.exports = function render(_ctx, _cache) {
  return (_openBlock(), _createElementBlock("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    "stroke-width": "1.5",
    stroke: "currentColor",
    "aria-hidden": "true"
  }, [
    _createElementVNode("path", {
      "stroke-linecap": "round",
      "stroke-linejoin": "round",
      d: "M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
    })
  ]))
}

/***/ }),

/***/ 76678:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ ParamsStack; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.js
var shared_esm_bundler = __webpack_require__(13053);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/paramsStack/ParamsStack.vue?vue&type=template&id=93bec236&ts=true

const _hoisted_1 = {
  key: 0,
  class: "text-center no_node_selected bg-bg-medium select-none"
};
const _hoisted_2 = { class: "cell auto panels_container" };
const _hoisted_3 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "div",
  { class: "h-2 bg-black" },
  null,
  -1
  /* HOISTED */
);
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_EmptyState = (0,runtime_core_esm_bundler/* resolveComponent */.up)("EmptyState");
  const _component_Params = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Params");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(
    "div",
    {
      class: "Panel ParamsStack h-full max-h-full overflow-y-scroll grid-y bg-bg-medium text-text styled-scroll-bar",
      onPointermove: _cache[0] || (_cache[0] = //@ts-ignore
      (...args) => _ctx.on_pointer_move && _ctx.on_pointer_move(...args))
    },
    [
      _ctx.validStackItems.length == 0 ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
        (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_EmptyState, {
          displayEmoji: false,
          title: "Parameters Stack",
          subtitle: "Display multiple node parameters at the same time"
        })
      ])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true),
      (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [
        ((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(
          runtime_core_esm_bundler/* Fragment */.HY,
          null,
          (0,runtime_core_esm_bundler/* renderList */.Ko)(_ctx.validStackItems, (validStackItem, i) => {
            return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(
              "div",
              {
                ref_for: true,
                ref: "paramsStackItem",
                class: (0,shared_esm_bundler/* normalizeClass */.C_)(["border-l-4", _ctx.selectedStates[i] ? "border-green-500" : "border-transparent"])
              },
              [
                ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_Params, {
                  nodeId: validStackItem.nodeId,
                  key: validStackItem.nodeId,
                  expanded: validStackItem.expanded,
                  overflowYAuto: false,
                  displayCloseButton: true,
                  displayGoToNodeButton: true,
                  expandable: true,
                  moveableUp: _ctx.moveableStates[i].up,
                  moveableDown: _ctx.moveableStates[i].down,
                  onClose: ($event) => _ctx.removeCurrentNodeIdFromIndex(i),
                  onGoToNode: ($event) => _ctx.goToNode(i),
                  onToggleExpanded: ($event) => _ctx.toggleExpanded(i),
                  onMoveUp: ($event) => _ctx.moveUp(i),
                  onMoveDown: ($event) => _ctx.moveDown(i)
                }, null, 8, ["nodeId", "expanded", "moveableUp", "moveableDown", "onClose", "onGoToNode", "onToggleExpanded", "onMoveUp", "onMoveDown"])),
                _hoisted_3
              ],
              2
              /* CLASS */
            );
          }),
          256
          /* UNKEYED_FRAGMENT */
        ))
      ])
    ],
    32
    /* HYDRATE_EVENTS */
  );
}

;// CONCATENATED MODULE: ../src/editor/components/panels/paramsStack/ParamsStack.vue?vue&type=template&id=93bec236&ts=true

// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/Type.ts
var Type = __webpack_require__(19037);
;// CONCATENATED MODULE: ../src/editor/components/panels/paramsStack/mixins/LayoutData.ts

var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));



function SetupLayoutData(options) {
  const { props, setupLinkIndex, stack } = options;
  (0,runtime_core_esm_bundler/* onBeforeMount */.wF)(() => {
    fromJSON(props.init_layout_data);
  });
  function fromJSON(json) {
    setupLinkIndex.fromJSON(json);
    const serializedStack = json.serializedStack;
    if (serializedStack != null && Type/* CoreType.isArray */.MR.isArray(serializedStack)) {
      for (let item of json.serializedStack) {
        const node = StoreController/* StoreController.scene.node */.F.scene.node(item.nodePath);
        if (node) {
          stack.value.push({
            nodeId: node.graphNodeId(),
            expanded: item.expanded
          });
        }
      }
    }
  }
  function layoutData() {
    const serializedStack = [];
    for (let item of stack.value) {
      const node = StoreController/* StoreController.engine.node */.F.engine.node(item.nodeId);
      if (node) {
        serializedStack.push({
          nodePath: node.path(),
          expanded: item.expanded
        });
      }
    }
    return __spreadProps(__spreadValues({}, setupLinkIndex.toJSON()), {
      serializedStack
    });
  }
  return { fromJSON, layoutData };
}

// EXTERNAL MODULE: ../src/editor/components/panels/common/LinkIndex.ts
var LinkIndex = __webpack_require__(44822);
// EXTERNAL MODULE: ../src/editor/helpers/KeyEventsDispatcher.ts
var KeyEventsDispatcher = __webpack_require__(72359);
;// CONCATENATED MODULE: ../src/editor/components/panels/paramsStack/mixins/EventMouse.ts


function SetupEventMouse(panelId, emit) {
  const processor = {
    panelId,
    onKeypress: (event) => false,
    onKeydown: (event) => false,
    onKeyup: (event) => false,
    emit
  };
  function on_pointer_move(event) {
    KeyEventsDispatcher/* KeyEventsDispatcher.instance */.s.instance().registerProcessor(processor);
  }
  return {
    on_pointer_move
  };
}

// EXTERNAL MODULE: ../src/editor/components/mixins/SelectedNode.ts
var SelectedNode = __webpack_require__(47392);
// EXTERNAL MODULE: ../src/editor/components/widgets/EmptyState.vue + 4 modules
var EmptyState = __webpack_require__(21842);
// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/outline/ArrowUpRightIcon.js
var ArrowUpRightIcon = __webpack_require__(67413);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/outline/XCircleIcon.js
var XCircleIcon = __webpack_require__(90532);
// EXTERNAL MODULE: ../src/editor/history/commands/NodeSelect.ts
var NodeSelect = __webpack_require__(3364);
// EXTERNAL MODULE: ../src/editor/core/Selection.ts
var Selection = __webpack_require__(39170);
// EXTERNAL MODULE: ../src/editor/Editor.ts + 11 modules
var Editor = __webpack_require__(90192);
// EXTERNAL MODULE: ../src/editor/components/panels/params/Params.vue + 186 modules
var Params = __webpack_require__(19502);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/paramsStack/ParamsStack.vue?vue&type=script&lang=ts
var ParamsStackvue_type_script_lang_ts_defProp = Object.defineProperty;
var ParamsStackvue_type_script_lang_ts_getOwnPropSymbols = Object.getOwnPropertySymbols;
var ParamsStackvue_type_script_lang_ts_hasOwnProp = Object.prototype.hasOwnProperty;
var ParamsStackvue_type_script_lang_ts_propIsEnum = Object.prototype.propertyIsEnumerable;
var ParamsStackvue_type_script_lang_ts_defNormalProp = (obj, key, value) => key in obj ? ParamsStackvue_type_script_lang_ts_defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var ParamsStackvue_type_script_lang_ts_spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (ParamsStackvue_type_script_lang_ts_hasOwnProp.call(b, prop))
      ParamsStackvue_type_script_lang_ts_defNormalProp(a, prop, b[prop]);
  if (ParamsStackvue_type_script_lang_ts_getOwnPropSymbols)
    for (var prop of ParamsStackvue_type_script_lang_ts_getOwnPropSymbols(b)) {
      if (ParamsStackvue_type_script_lang_ts_propIsEnum.call(b, prop))
        ParamsStackvue_type_script_lang_ts_defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};












/* harmony default export */ var ParamsStackvue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "param-panel",
  components: {
    EmptyState: EmptyState/* default */.Z,
    Params: Params/* default */.Z,
    ArrowUpRightIcon: ArrowUpRightIcon,
    XCircleIcon: XCircleIcon
  },
  props: {
    panelId: {
      type: String,
      default: null
    },
    // nodeId: {
    // 	type: Number as () => CoreGraphNodeId,
    // 	default: null,
    // },
    init_layout_data: {
      type: Object,
      default() {
        return {};
      }
    }
  },
  setup(props, { emit }) {
    const stack = (0,reactivity_esm_bundler/* ref */.iH)([]);
    const paramsStackItem = (0,reactivity_esm_bundler/* ref */.iH)([]);
    const setupLinkIndex = (0,LinkIndex/* SetupLinkIndex */.US)(props.init_layout_data.linkIndex);
    const selection_options = (0,SelectedNode/* SetupSelectedNode */.d)(setupLinkIndex);
    const JSONNodeId = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return selection_options.first_selected_node_id.value;
    });
    (0,runtime_core_esm_bundler/* watch */.YP)(JSONNodeId, addCurrentNodeId);
    const validStackItems = (0,runtime_core_esm_bundler/* computed */.Fl)(
      () => stack.value.filter((item) => StoreController/* StoreController.engine.json_node */.F.engine.json_node(item.nodeId) != null)
    );
    const nodeIds = (0,runtime_core_esm_bundler/* computed */.Fl)(() => validStackItems.value.map((item) => item.nodeId));
    const moveableStates = (0,runtime_core_esm_bundler/* computed */.Fl)(
      () => validStackItems.value.map((item, i) => ({
        up: i > 0,
        down: i < validStackItems.value.length - 1
      }))
    );
    const selectedStates = (0,runtime_core_esm_bundler/* computed */.Fl)(
      () => nodeIds.value.map((nodeId) => {
        var _a;
        const node = StoreController/* StoreController.engine.node */.F.engine.node(nodeId);
        if (!node) {
          return false;
        }
        const parent = node.parent();
        if (!parent) {
          return false;
        }
        const jsonParent = StoreController/* StoreController.engine.json_node */.F.engine.json_node(parent.graphNodeId());
        return ((_a = jsonParent == null ? void 0 : jsonParent.selection) == null ? void 0 : _a.includes(nodeId)) || false;
      })
    );
    function addCurrentNodeId() {
      var _a;
      if ((_a = Editor/* Editor.instance */.M.instance().historyStack()) == null ? void 0 : _a.undoInProgress()) {
        return;
      }
      if (JSONNodeId.value == null) {
        return;
      }
      if (nodeIds.value.includes(JSONNodeId.value)) {
        const index = nodeIds.value.indexOf(JSONNodeId.value);
        _scrollToIndex(index);
        return;
      }
      _scrollToIndex(0);
      stack.value.unshift({ nodeId: JSONNodeId.value, expanded: true });
    }
    function removeCurrentNodeIdFromIndex(index) {
      stack.value.splice(index, 1);
    }
    function toggleExpanded(index) {
      const item = stack.value[index];
      if (!item) {
        return;
      }
      item.expanded = !item.expanded;
    }
    function moveUp(index) {
      _swapItems(index, index - 1);
    }
    function moveDown(index) {
      _swapItems(index, index + 1);
    }
    function _swapItems(index1, index2) {
      const item1 = stack.value[index1];
      const item2 = stack.value[index2];
      stack.value[index1] = item2;
      stack.value[index2] = item1;
    }
    function _scrollToIndex(index) {
      const scrollTarget = paramsStackItem.value[index];
      if (!scrollTarget) {
        return;
      }
      const alignToTop = true;
      scrollTarget.scrollIntoView(alignToTop);
    }
    function goToNode(index) {
      const nodeId = nodeIds.value[index];
      if (nodeId == null) {
        return;
      }
      const node = StoreController/* StoreController.engine.node */.F.engine.node(nodeId);
      if (!node) {
        return;
      }
      const parent = node.parent();
      if (!parent) {
        return;
      }
      _goToNode(parent, node);
    }
    function _goToNode(parent, childToSelect) {
      return __async(this, null, function* () {
        StoreController/* StoreController.editor.setCurrentNode */.F.editor.setCurrentNode(setupLinkIndex.linkIndex.value, parent);
        if (parent.childrenAllowed() && parent.childrenController) {
          if (childToSelect) {
            const cmd = new NodeSelect/* NodeSelectCommand */.V(parent, [childToSelect], Selection/* SelectionMethod.OVERRIDE */.K.OVERRIDE);
            yield Editor/* Editor.instance */.M.instance().pushCommand(cmd);
          }
        } else {
          _goToNode(parent);
        }
      });
    }
    const LayoutDataMixin = SetupLayoutData({ props, setupLinkIndex, stack });
    const eventMouse = SetupEventMouse(props.panelId, emit);
    return ParamsStackvue_type_script_lang_ts_spreadValues(ParamsStackvue_type_script_lang_ts_spreadValues(ParamsStackvue_type_script_lang_ts_spreadValues({
      paramsStackItem,
      // stackScrollContainer,
      validStackItems,
      selectedStates,
      moveableStates,
      removeCurrentNodeIdFromIndex,
      toggleExpanded,
      goToNode,
      moveUp,
      moveDown
    }, setupLinkIndex), LayoutDataMixin), eventMouse);
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/panels/paramsStack/ParamsStack.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/panels/paramsStack/ParamsStack.vue




;


const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ParamsStackvue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var ParamsStack = (__exports__);

/***/ })

}])
//# sourceMappingURL=src_editor_components_panels_paramsStack_ParamsStack_vue.aea3bbb901c937a1af24.js.map