{"version":3,"file":"src_engine_examples_examples_anim_Target_Node_ts.ccc8fb87fffdb1086eb5.js","mappings":"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","sources":["webpack:///../@polygonjs/polygonjs/src/core/animation/PropertyTarget.ts","webpack:///../@polygonjs/polygonjs/src/core/animation/UpdateCallback.ts","webpack:///../@polygonjs/polygonjs/src/engine/nodes/anim/Target.ts","webpack:///../src/engine/examples/examples/anim/Target.Node.ts"],"sourcesContent":["import {Object3D} from 'three';\nimport {BaseNodeType} from '../../engine/nodes/_Base';\nimport {PolyScene} from '../../engine/scene/PolyScene';\n\ninterface PropertyTargetOptions {\n\tnode?: {\n\t\tpath: string;\n\t\trelativeTo: BaseNodeType;\n\t};\n\tobject?: {\n\t\tlist?: Object3D[];\n\t\tmask?: string;\n\t};\n}\nexport class AnimPropertyTarget {\n\tconstructor(private _scene: PolyScene, private _options: PropertyTargetOptions) {}\n\n\tclone() {\n\t\treturn new AnimPropertyTarget(this._scene, this._options);\n\t}\n\n\tobjects() {\n\t\tconst objectData = this._options.object;\n\t\tif (!objectData) {\n\t\t\treturn;\n\t\t}\n\t\tif (objectData.list) {\n\t\t\treturn objectData.list;\n\t\t}\n\t\tconst mask = objectData.mask;\n\t\tif (!mask) {\n\t\t\treturn;\n\t\t}\n\t\treturn this._scene.objectsByMask(mask);\n\t}\n\n\tnode() {\n\t\tif (!this._options.node) {\n\t\t\treturn;\n\t\t}\n\t\tconst options = this._options.node;\n\t\treturn options.relativeTo.node(options.path);\n\t}\n}\n","export class AnimationUpdateCallback {\n\tprivate _update_matrix: boolean = false;\n\n\tclone() {\n\t\tconst new_update_callback = new AnimationUpdateCallback();\n\t\tnew_update_callback.setUpdateMatrix(this._update_matrix);\n\t\treturn new_update_callback;\n\t}\n\n\tsetUpdateMatrix(update_matrix: boolean) {\n\t\tthis._update_matrix = update_matrix;\n\t}\n\tupdateMatrix() {\n\t\treturn this._update_matrix;\n\t}\n}\n","/**\n * Target of the animation\n *\n *\n */\nimport {TypedAnimNode} from './_Base';\nimport {TimelineBuilder} from '../../../core/animation/TimelineBuilder';\n\nexport enum AnimTargetNodeTargetType {\n\tSCENE_GRAPH = 'scene graph',\n\tNODE = 'node',\n}\nexport const ANIM_TARGET_TYPES: AnimTargetNodeTargetType[] = [\n\tAnimTargetNodeTargetType.SCENE_GRAPH,\n\tAnimTargetNodeTargetType.NODE,\n];\nconst TARGET_TYPE_SCENE_GRAPH = ANIM_TARGET_TYPES.indexOf(AnimTargetNodeTargetType.SCENE_GRAPH);\nconst TARGET_TYPE_NODE = ANIM_TARGET_TYPES.indexOf(AnimTargetNodeTargetType.NODE);\n\nimport {NodeParamsConfig, ParamConfig} from '../utils/params/ParamsConfig';\nimport {TypeAssert} from '../../poly/Assert';\nimport {AnimPropertyTarget} from '../../../core/animation/PropertyTarget';\nimport {AnimationUpdateCallback} from '../../../core/animation/UpdateCallback';\nimport {BaseParamType} from '../../params/_Base';\nimport {BaseNodeType} from '../_Base';\nimport {isBooleanTrue} from '../../../core/BooleanValue';\nimport {AnimType} from '../../poly/registers/nodes/types/Anim';\nclass TargetAnimParamsConfig extends NodeParamsConfig {\n\t/** @param sets if the target is a Polygonjs node, or a THREE object */\n\ttype = ParamConfig.INTEGER(TARGET_TYPE_SCENE_GRAPH, {\n\t\tmenu: {\n\t\t\tentries: ANIM_TARGET_TYPES.map((name, value) => {\n\t\t\t\treturn {name, value};\n\t\t\t}),\n\t\t},\n\t});\n\t/** @param if set to a Polygonjs node, this is the node path */\n\tnodePath = ParamConfig.NODE_PATH('', {\n\t\tvisibleIf: {type: TARGET_TYPE_NODE},\n\t});\n\t/** @param if set to a THREE object, this is a mask to find the objects */\n\tobjectMask = ParamConfig.STRING('/geo*', {\n\t\tvisibleIf: {type: TARGET_TYPE_SCENE_GRAPH},\n\t\tobjectMask: true,\n\t});\n\t/** @param sets if the matrix should be updated as the animation progresses */\n\tupdateMatrix = ParamConfig.BOOLEAN(1, {\n\t\tvisibleIf: {type: TARGET_TYPE_SCENE_GRAPH},\n\t});\n\t/** @param prints which objects are targeted by this node, for debugging */\n\tprintResolve = ParamConfig.BUTTON(null, {\n\t\tcallback: (node: BaseNodeType, param: BaseParamType) => {\n\t\t\tTargetAnimNode.PARAM_CALLBACK_print_resolve(node as TargetAnimNode);\n\t\t},\n\t});\n}\nconst ParamsConfig = new TargetAnimParamsConfig();\n\nexport class TargetAnimNode extends TypedAnimNode<TargetAnimParamsConfig> {\n\toverride paramsConfig = ParamsConfig;\n\tstatic override type() {\n\t\treturn AnimType.TARGET;\n\t}\n\n\toverride initializeNode() {\n\t\tthis.io.inputs.setCount(0, 1);\n\t}\n\n\toverride cook(inputCoreContents: TimelineBuilder[]) {\n\t\tconst timelineBuilder = inputCoreContents[0] || new TimelineBuilder();\n\n\t\tconst target = this._create_target(timelineBuilder);\n\t\ttimelineBuilder.setTarget(target);\n\t\tthis._set_update_callback(timelineBuilder);\n\n\t\tthis.setTimelineBuilder(timelineBuilder);\n\t}\n\tsetTargetType(targetType: AnimTargetNodeTargetType) {\n\t\tthis.p.type.set(ANIM_TARGET_TYPES.indexOf(targetType));\n\t}\n\tprivate _create_target(timelineBuilder: TimelineBuilder) {\n\t\tconst type = ANIM_TARGET_TYPES[this.pv.type];\n\t\tswitch (type) {\n\t\t\tcase AnimTargetNodeTargetType.NODE: {\n\t\t\t\treturn new AnimPropertyTarget(this.scene(), {\n\t\t\t\t\tnode: {\n\t\t\t\t\t\tpath: this.pv.nodePath.path(),\n\t\t\t\t\t\trelativeTo: this,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tcase AnimTargetNodeTargetType.SCENE_GRAPH: {\n\t\t\t\treturn new AnimPropertyTarget(this.scene(), {object: {mask: this.pv.objectMask}});\n\t\t\t}\n\t\t}\n\t\tTypeAssert.unreachable(type);\n\t}\n\tprivate _set_update_callback(timelineBuilder: TimelineBuilder) {\n\t\tconst type = ANIM_TARGET_TYPES[this.pv.type];\n\t\tlet update_callback = timelineBuilder.updateCallback();\n\t\tswitch (type) {\n\t\t\tcase AnimTargetNodeTargetType.NODE: {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase AnimTargetNodeTargetType.SCENE_GRAPH: {\n\t\t\t\tif (isBooleanTrue(this.pv.updateMatrix)) {\n\t\t\t\t\tupdate_callback = update_callback || new AnimationUpdateCallback();\n\t\t\t\t\tupdate_callback.setUpdateMatrix(this.pv.updateMatrix);\n\t\t\t\t\ttimelineBuilder.setUpdateCallback(update_callback);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTypeAssert.unreachable(type);\n\t}\n\n\tstatic PARAM_CALLBACK_print_resolve(node: TargetAnimNode) {\n\t\tnode.print_resolve();\n\t}\n\tprivate print_resolve() {\n\t\tconst type = ANIM_TARGET_TYPES[this.pv.type];\n\t\tconst timeline_builder = new TimelineBuilder();\n\t\tconst target = this._create_target(timeline_builder);\n\t\tswitch (type) {\n\t\t\tcase AnimTargetNodeTargetType.NODE: {\n\t\t\t\treturn console.log(target.node());\n\t\t\t}\n\t\t\tcase AnimTargetNodeTargetType.SCENE_GRAPH: {\n\t\t\t\treturn console.log(target.objects());\n\t\t\t}\n\t\t}\n\t}\n}\n","import {AnimTargetNodeTargetType} from './../../../../../@polygonjs/polygonjs/src/engine/nodes/anim/Target';\nimport {AnimNodeEasing} from './../../../../../@polygonjs/polygonjs/src/core/animation/Constant';\nimport type {EventsNetworkSopNode} from './../../../../../@polygonjs/polygonjs/src/engine/nodes/sop/EventsNetwork';\nimport type {PerspectiveCameraObjNode} from './../../../../../@polygonjs/polygonjs/src/engine/nodes/obj/PerspectiveCamera';\nimport type {AnimationsNetworkSopNode} from './../../../../../@polygonjs/polygonjs/src/engine/nodes/sop/AnimationsNetwork';\nimport type {GeoObjNode} from './../../../../../@polygonjs/polygonjs/src/engine/nodes/obj/Geo';\nimport type {RootManagerNode} from './../../../../../@polygonjs/polygonjs/src/engine/nodes/manager/Root';\nimport type {ExampleData, DataCallbackOptions} from '../../Common';\n\nexport function createData(options: DataCallbackOptions): ExampleData {\n\tconst {scene} = options;\n\tconst root = scene.root();\n\n\t// const parentNode =root;\n\n\t// var nodesByRequestedName_2 = {}\n\t// var geo1 = geo/\n\t// var grid = parentNode.node('grid')\n\t// var hemisphereLight1 = parentNode.node('hemisphereLight1')\n\t// var perspectiveCamera1 = parentNode.node('perspectiveCamera1')\n\t// var COP = parentNode.node('COP')\n\tfunction create_geo1(parentNode: RootManagerNode) {\n\t\tvar geo1 = parentNode.createNode('geo');\n\t\tgeo1.setName('geo1');\n\t\tfunction create_ANIM(geo1: GeoObjNode) {\n\t\t\tconst ANIM = geo1.createNode('animationsNetwork');\n\t\t\tANIM.setName('ANIM');\n\t\t\tfunction create_CONTROLS(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar CONTROLS = ANIM.createNode('play');\n\t\t\t\tCONTROLS.setName('CONTROLS');\n\t\t\t\tCONTROLS.uiData.setPosition(-150, 700);\n\t\t\t\tCONTROLS.params.postCreateSpareParams();\n\t\t\t\tCONTROLS.params.runOnSceneLoadHooks();\n\n\t\t\t\tCONTROLS.uiData.setComment(`By using the play/stop/rewind buttons of this node,\nyou will animate the copy node that is at the level above.\n\nIn this case, the animation is set to animate its parameter 'count',\nwhich then animates the number of objects created.`);\n\n\t\t\t\treturn CONTROLS;\n\t\t\t}\n\t\t\tfunction create_PLAY(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar PLAY = ANIM.createNode('null');\n\t\t\t\tPLAY.setName('PLAY');\n\t\t\t\tPLAY.uiData.setPosition(0, 600);\n\t\t\t\tPLAY.params.postCreateSpareParams();\n\t\t\t\tPLAY.params.runOnSceneLoadHooks();\n\t\t\t\treturn PLAY;\n\t\t\t}\n\t\t\tfunction create_RESET(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar RESET = ANIM.createNode('null');\n\t\t\t\tRESET.setName('RESET');\n\t\t\t\tRESET.uiData.setPosition(-300, 600);\n\t\t\t\tRESET.params.postCreateSpareParams();\n\t\t\t\tRESET.params.runOnSceneLoadHooks();\n\t\t\t\treturn RESET;\n\t\t\t}\n\t\t\tfunction create_duration1(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar duration1 = ANIM.createNode('duration');\n\t\t\t\tduration1.setName('duration1');\n\t\t\t\tduration1.uiData.setPosition(0, 0);\n\t\t\t\tduration1.params.postCreateSpareParams();\n\t\t\t\tduration1.params.runOnSceneLoadHooks();\n\t\t\t\treturn duration1;\n\t\t\t}\n\t\t\tfunction create_easing1(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar easing1 = ANIM.createNode('easing');\n\t\t\t\teasing1.setName('easing1');\n\t\t\t\teasing1.uiData.setPosition(0, 100);\n\t\t\t\teasing1.setEasing(AnimNodeEasing.POWER2);\n\t\t\t\teasing1.params.postCreateSpareParams();\n\t\t\t\teasing1.params.runOnSceneLoadHooks();\n\t\t\t\treturn easing1;\n\t\t\t}\n\t\t\tfunction create_propertyName1(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar propertyName1 = ANIM.createNode('propertyName');\n\t\t\t\tpropertyName1.setName('propertyName1');\n\t\t\t\tpropertyName1.uiData.setPosition(0, 400);\n\t\t\t\tpropertyName1.p.name.set('count');\n\t\t\t\tpropertyName1.params.postCreateSpareParams();\n\t\t\t\tpropertyName1.params.runOnSceneLoadHooks();\n\t\t\t\treturn propertyName1;\n\t\t\t}\n\t\t\tfunction create_propertyValue1(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar propertyValue1 = ANIM.createNode('propertyValue');\n\t\t\t\tpropertyValue1.setName('propertyValue1');\n\t\t\t\tpropertyValue1.uiData.setPosition(0, 500);\n\t\t\t\tpropertyValue1.p.size.set(1);\n\t\t\t\tpropertyValue1.p.value1.set(15);\n\t\t\t\tpropertyValue1.params.postCreateSpareParams();\n\t\t\t\tpropertyValue1.params.runOnSceneLoadHooks();\n\t\t\t\treturn propertyValue1;\n\t\t\t}\n\t\t\tfunction create_propertyValue2(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar propertyValue2 = ANIM.createNode('propertyValue');\n\t\t\t\tpropertyValue2.setName('propertyValue2');\n\t\t\t\tpropertyValue2.uiData.setPosition(-300, 500);\n\t\t\t\tpropertyValue2.p.size.set(1);\n\t\t\t\tpropertyValue2.params.postCreateSpareParams();\n\t\t\t\tpropertyValue2.params.runOnSceneLoadHooks();\n\t\t\t\treturn propertyValue2;\n\t\t\t}\n\t\t\tfunction create_target1(ANIM: AnimationsNetworkSopNode) {\n\t\t\t\tvar target1 = ANIM.createNode('target');\n\t\t\t\ttarget1.setName('target1');\n\t\t\t\ttarget1.uiData.setPosition(0, 300);\n\t\t\t\ttarget1.setTargetType(AnimTargetNodeTargetType.NODE);\n\t\t\t\ttarget1.p.nodePath.set('../../copy1');\n\t\t\t\ttarget1.params.postCreateSpareParams();\n\t\t\t\ttarget1.params.runOnSceneLoadHooks();\n\t\t\t\treturn target1;\n\t\t\t}\n\t\t\tvar CONTROLS = create_CONTROLS(ANIM);\n\t\t\tvar PLAY = create_PLAY(ANIM);\n\t\t\tvar RESET = create_RESET(ANIM);\n\t\t\tvar duration1 = create_duration1(ANIM);\n\t\t\tvar easing1 = create_easing1(ANIM);\n\t\t\tvar propertyName1 = create_propertyName1(ANIM);\n\t\t\tvar propertyValue1 = create_propertyValue1(ANIM);\n\t\t\tvar propertyValue2 = create_propertyValue2(ANIM);\n\t\t\tvar target1 = create_target1(ANIM);\n\t\t\tCONTROLS.setInput(0, RESET);\n\t\t\tCONTROLS.setInput(1, PLAY);\n\t\t\tPLAY.setInput(0, propertyValue1);\n\t\t\tRESET.setInput(0, propertyValue2);\n\t\t\teasing1.setInput(0, duration1);\n\t\t\tpropertyName1.setInput(0, target1);\n\t\t\tpropertyValue1.setInput(0, propertyName1);\n\t\t\tpropertyValue2.setInput(0, propertyName1);\n\t\t\ttarget1.setInput(0, easing1);\n\t\t\tANIM.childrenController?.selection.add([propertyValue1]);\n\t\t\tANIM.uiData.setPosition(-400, 300);\n\t\t\tANIM.params.postCreateSpareParams();\n\t\t\tANIM.params.runOnSceneLoadHooks();\n\t\t\treturn {ANIM, CONTROLS};\n\t\t}\n\t\tfunction create_box1(geo1: GeoObjNode) {\n\t\t\tvar box1 = geo1.createNode('box');\n\t\t\tbox1.setName('box1');\n\t\t\tbox1.uiData.setPosition(-200, 0);\n\t\t\tbox1.params.postCreateSpareParams();\n\t\t\tbox1.params.runOnSceneLoadHooks();\n\t\t\treturn box1;\n\t\t}\n\t\tfunction create_copy1(geo1: GeoObjNode) {\n\t\t\tvar copy1 = geo1.createNode('copy');\n\t\t\tcopy1.setName('copy1');\n\t\t\tcopy1.uiData.setPosition(-200, 200);\n\t\t\tcopy1.flags.display.set(true);\n\t\t\tcopy1.p.count.set(1);\n\t\t\tcopy1.p.t.x.set(1);\n\t\t\tcopy1.p.r.x.set(7);\n\t\t\tcopy1.p.scale.set(0.95);\n\t\t\tcopy1.params.postCreateSpareParams();\n\t\t\tcopy1.params.runOnSceneLoadHooks();\n\t\t\treturn copy1;\n\t\t}\n\t\tconst ANIM = create_ANIM(geo1);\n\t\tvar box1 = create_box1(geo1);\n\t\tvar copy1 = create_copy1(geo1);\n\t\tcopy1.setInput(0, box1);\n\t\tgeo1.uiData.setPosition(-50, -150);\n\t\tgeo1.flags.display.set(true);\n\t\tgeo1.params.postCreateSpareParams();\n\t\tgeo1.params.runOnSceneLoadHooks();\n\t\treturn {geo1, ...ANIM};\n\t}\n\tfunction create_grid(parentNode: RootManagerNode) {\n\t\tvar grid = parentNode.createNode('geo');\n\t\tgrid.setName('grid');\n\t\tfunction create_planeHelper1(grid: GeoObjNode) {\n\t\t\tvar planeHelper1 = grid.createNode('planeHelper');\n\t\t\tplaneHelper1.setName('planeHelper1');\n\t\t\tplaneHelper1.uiData.setPosition(0, 0);\n\t\t\tplaneHelper1.flags.display.set(true);\n\t\t\tplaneHelper1.params.postCreateSpareParams();\n\t\t\tplaneHelper1.params.runOnSceneLoadHooks();\n\t\t\treturn planeHelper1;\n\t\t}\n\t\tcreate_planeHelper1(grid);\n\t\tgrid.uiData.setPosition(-50, -250);\n\t\tgrid.flags.display.set(true);\n\t\tgrid.params.postCreateSpareParams();\n\t\tgrid.params.runOnSceneLoadHooks();\n\t\treturn grid;\n\t}\n\tfunction create_hemisphereLight1(parentNode: RootManagerNode) {\n\t\tvar hemisphereLight1 = parentNode.createNode('hemisphereLight');\n\t\themisphereLight1.setName('hemisphereLight1');\n\t\themisphereLight1.uiData.setPosition(150, 100);\n\t\themisphereLight1.flags.display.set(true);\n\t\themisphereLight1.params.postCreateSpareParams();\n\t\themisphereLight1.params.runOnSceneLoadHooks();\n\t\treturn hemisphereLight1;\n\t}\n\tfunction create_perspectiveCamera1(parentNode: RootManagerNode) {\n\t\tvar perspectiveCamera1 = parentNode.createNode('perspectiveCamera');\n\t\tperspectiveCamera1.setName('perspectiveCamera1');\n\t\tfunction create_events1(perspectiveCamera1: PerspectiveCameraObjNode) {\n\t\t\tvar events1 = perspectiveCamera1.createNode('eventsNetwork');\n\t\t\tevents1.setName('events1');\n\t\t\tfunction create_cameraOrbitControls1(events1: EventsNetworkSopNode) {\n\t\t\t\tvar cameraOrbitControls1 = events1.createNode('cameraOrbitControls');\n\t\t\t\tcameraOrbitControls1.setName('cameraOrbitControls1');\n\t\t\t\tcameraOrbitControls1.uiData.setPosition(150, 50);\n\t\t\t\tcameraOrbitControls1.p.target.x.set(3.9625400379401956);\n\t\t\t\tcameraOrbitControls1.p.target.y.set(0.04817053372011402);\n\t\t\t\tcameraOrbitControls1.p.target.z.set(-0.41243246672712486);\n\t\t\t\tcameraOrbitControls1.params.postCreateSpareParams();\n\t\t\t\tcameraOrbitControls1.params.runOnSceneLoadHooks();\n\t\t\t\treturn cameraOrbitControls1;\n\t\t\t}\n\t\t\tcreate_cameraOrbitControls1(events1);\n\t\t\tevents1.uiData.setPosition(-200, 50);\n\t\t\tevents1.params.postCreateSpareParams();\n\t\t\tevents1.params.runOnSceneLoadHooks();\n\t\t\treturn events1;\n\t\t}\n\t\tcreate_events1(perspectiveCamera1);\n\t\tperspectiveCamera1.uiData.setPosition(-200, 100);\n\t\tperspectiveCamera1.flags.display.set(true);\n\t\tperspectiveCamera1.p.t.x.set(3.6074898987970676);\n\t\tperspectiveCamera1.p.t.y.set(3.819513329169221);\n\t\tperspectiveCamera1.p.t.z.set(7.530044733696088);\n\t\tperspectiveCamera1.p.r.x.set(-25.364255830000126);\n\t\tperspectiveCamera1.p.r.y.set(-2.6336595742865265);\n\t\tperspectiveCamera1.p.r.z.set(-1.2479036576512519);\n\t\tperspectiveCamera1.p.controls.set('./events1/cameraOrbitControls1');\n\t\tperspectiveCamera1.params.postCreateSpareParams();\n\t\tperspectiveCamera1.params.runOnSceneLoadHooks();\n\t\treturn perspectiveCamera1;\n\t}\n\t// function create_COP(parentNode:RootManagerNode){\n\t// \tvar COP = parentNode.createNode('copNetwork')\n\t// \tCOP.setName('COP')\n\t// \tfunction create_envMap(COP:CopNetworkObjNode){\n\t// \t\tvar envMap = COP.createNode('envMap')\n\t// \t\tenvMap.setName('envMap')\n\t// \t\tenvMap.uiData.setPosition(50, 200)\n\t// \t\tenvMap.params.postCreateSpareParams()\n\t// \t\tenvMap.params.runOnSceneLoadHooks()\n\t// \t\treturn envMap\n\t// \t}\n\t// \tfunction create_imageEnv(COP:CopNetworkObjNode){\n\t// \t\tvar imageEnv = COP.createNode('imageEXR')\n\t// \t\timageEnv.setName('imageEnv')\n\t// \t\timageEnv.uiData.setPosition(50, 100)\n\t// \t\timageEnv.params.get('url').set('https://raw.githubusercontent.com/polygonjs/polygonjs-assets/master/textures/piz_compressed.exr')\n\t// \t\timageEnv.params.postCreateSpareParams()\n\t// \t\timageEnv.params.runOnSceneLoadHooks()\n\t// \t\treturn imageEnv\n\t// \t}\n\t// \tfunction create_imageUv(COP:CopNetworkObjNode){\n\t// \t\tvar imageUv = COP.createNode('image')\n\t// \t\timageUv.setName('imageUv')\n\t// \t\timageUv.uiData.setPosition(-100, 100)\n\t// \t\timageUv.params.get('url').set('https://raw.githubusercontent.com/polygonjs/polygonjs-assets/master/textures/uv.jpg')\n\t// \t\timageUv.params.get('tflipY').set(true)\n\t// \t\timageUv.params.postCreateSpareParams()\n\t// \t\timageUv.params.runOnSceneLoadHooks()\n\t// \t\treturn imageUv\n\t// \t}\n\t// \tvar envMap = create_envMap(COP)\n\t// \tvar imageEnv = create_imageEnv(COP)\n\t// \tvar imageUv = create_imageUv(COP)\n\t// \tenvMap.setInput(0, imageEnv, {\"noExceptionOnInvalidInput\":true})\n\t// \tCOP.uiData.setPosition(-200, 200)\n\t// \tCOP.params.postCreateSpareParams()\n\t// \tCOP.params.runOnSceneLoadHooks()\n\t// \treturn COP\n\t// }\n\tconst {CONTROLS} = create_geo1(root);\n\tcreate_grid(root);\n\tcreate_hemisphereLight1(root);\n\tconst perspectiveCamera1 = create_perspectiveCamera1(root);\n\t// return nodesByRequestedName_2\n\n\treturn {\n\t\tscene,\n\t\tcameraPath: perspectiveCamera1.path(),\n\t\tfocusedNodes: [CONTROLS],\n\t};\n}\n\n// export const animTargetNode = [\n// \tnew Example({\n// \t\tname: `${ExamplePrefix.BY_NODE}/anim/target/Animate Nodes`,\n// \t\tcreateData,\n// \t\trelatedNodes: [TargetAnimNode],\n// \t\tcategories: [ExampleCategory.ANIMATION],\n// \t}),\n// \t// new Example({name: `${ExamplePrefix.BY_CATEGORY}/animation/Node`, createData}),\n// ];\n"],"names":["AnimTargetNodeTargetType","geo1","ANIM","CONTROLS","PLAY","RESET","duration1","easing1","propertyName1","propertyValue1","propertyValue2","target1","box1","copy1","grid","perspectiveCamera1","events1"],"sourceRoot":""}