(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_npm_module_PolyConfigLoadController_ts"],{

/***/ 12305:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NpmModulePolyConfigLoadController": function() { return /* binding */ NpmModulePolyConfigLoadController; }
/* harmony export */ });
/* harmony import */ var _NpmModuleApiController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58656);
/* harmony import */ var _polygonjs_polygonjs_src_engine_Poly__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99934);
/* harmony import */ var _editor_self_contained_FilesRegister__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91282);

var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};



class NpmModulePolyConfigLoadController {
  // private static _resolve: ((t: unknown) => void) | undefined;
  static load(sceneName) {
    return new Promise((resolve) => __async(this, null, function* () {
      window.__POLYGONJS_POLY__ = _polygonjs_polygonjs_src_engine_Poly__WEBPACK_IMPORTED_MODULE_2__/* .Poly */ .L;
      yield _editor_self_contained_FilesRegister__WEBPACK_IMPORTED_MODULE_1__.FilesRegister.registerPolyConfig(_NpmModuleApiController__WEBPACK_IMPORTED_MODULE_0__/* .NpmModuleApiController.config.polyConfigUrlRaw */ .q.config.polyConfigUrlRaw({ sceneName }));
      const url = _NpmModuleApiController__WEBPACK_IMPORTED_MODULE_0__/* .NpmModuleApiController.config.polyConfigUrl */ .q.config.polyConfigUrl({ sceneName });
      window.__POLYGONJS_POLY_CONFIG_INSTANCE__RESOLVE = () => {
        resolve();
      };
      const scriptElement = document.createElement("script");
      scriptElement.setAttribute("type", "module");
      const text = `
			import {configurePolygonjs, configureScene} from '${url}';
			if(window.__POLYGONJS_POLY__ && window.__POLYGONJS_POLY__.wrapConfigurePolygonjs) {
				window.__POLYGONJS_POLY__.wrapConfigurePolygonjs(async ()=>{
					await configurePolygonjs(window.__POLYGONJS_POLY__)
				});
			}else{
				console.warn('configurePolygonjs not run')
			}
			window.__POLYGONJS_POLY_CONFIG_CONFIGURE_SCENE = configureScene;
			const polyConfigResolve = window.__POLYGONJS_POLY_CONFIG_INSTANCE__RESOLVE;
			window.__POLYGONJS_POLY_CONFIG_INSTANCE__RESOLVE = undefined;
			window.__POLYGONJS_POLY__ = undefined;
			if(polyConfigResolve) {
				polyConfigResolve()
			} else {
				console.warn('polyConfigResolve not run')
			}
			`;
      scriptElement.text = text;
      document.body.appendChild(scriptElement);
    }));
  }
  // static check_if_config_loaded() {
  // 	if (window.__POLYGONJS_POLY_INSTANCE__CONFIG_LOADED) {
  // 		if (this._resolve) {
  // 			this._resolve(undefined);
  // 		}
  // 	} else {
  // 		setTimeout(() => {
  // 			this.check_if_config_loaded();
  // 		}, 100);
  // 	}
  // }
}


/***/ })

}])
//# sourceMappingURL=src_npm_module_PolyConfigLoadController_ts.f041714433dc14cf16c7.js.map