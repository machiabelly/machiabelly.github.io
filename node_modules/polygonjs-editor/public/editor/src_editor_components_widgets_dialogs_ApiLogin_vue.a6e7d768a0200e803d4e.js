(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_widgets_dialogs_ApiLogin_vue"],{

/***/ 22477:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ ApiLogin; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
// EXTERNAL MODULE: ../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js + 1 modules
var runtime_dom_esm_bundler = __webpack_require__(90996);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/widgets/dialogs/ApiLogin.vue?vue&type=template&id=0a579791&ts=true

const _hoisted_1 = { class: "ApiLoginPrompt" };
const _hoisted_2 = { class: "body_elements mx-3 my-4 bg-bg text-text" };
const _hoisted_3 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "label",
  {
    for: "email",
    class: "block text-sm font-medium mt-4"
  },
  " Email address ",
  -1
  /* HOISTED */
);
const _hoisted_4 = { class: "mt-1" };
const _hoisted_5 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "label",
  {
    for: "password",
    class: "block text-sm font-medium mt-2"
  },
  " Password ",
  -1
  /* HOISTED */
);
const _hoisted_6 = { class: "mt-1" };
const _hoisted_7 = {
  key: 0,
  class: "buttons text-right mx-3 px-4 text-white"
};
const _hoisted_8 = {
  key: 1,
  class: "mt-5 mr-3 sm:mt-4 sm:flex sm:flex-row-reverse"
};
const _hoisted_9 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "div",
  { class: "text-left create-account-link my-2 text-xs mx-3" },
  [
    /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)("p", { class: "text-right" }, [
      /* @__PURE__ */ (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(" <span>if you do not have an account, or need to reset your password, go to</span "),
      /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)("span", { class: "mr-1 text-text-faded" }, "Or"),
      /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)("a", {
        class: "text-blue-500 hover:text-blue-600 border-b-2 border-blue-500",
        href: "https://polygonjs.com",
        target: "_blank"
      }, "create your account"),
      /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)("span", { class: "ml-1 text-text-faded" }, "on Polygonjs")
    ])
  ],
  -1
  /* HOISTED */
);
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_ErrorComponent = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ErrorComponent");
  const _component_font_awesome_icon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("font-awesome-icon");
  const _component_Modal = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Modal");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
    (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_Modal, {
      displayed: _ctx.displayed,
      title: "Login",
      ref: "modal",
      size: { x: 400, y: 500 },
      resizable: false,
      onClose: _ctx.close
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
        (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [
          _ctx.errored && _ctx.error_message != null ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_ErrorComponent, {
            key: 0,
            title: "Login Failed",
            message: _ctx.error_message
          }, null, 8, ["message"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true),
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", null, [
            (0,runtime_core_esm_bundler/* createElementVNode */._)("form", null, [
              (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <label for="email">Email</label>\n						<input\n							id="email"\n							type="email"\n							ref="email_input"\n							@keypress.stop="on_keypress"\n							@keyup.stop=""\n							@keydown.stop=""\n						/><br /> '),
              (0,runtime_core_esm_bundler/* createElementVNode */._)("div", null, [
                _hoisted_3,
                (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [
                  (0,runtime_core_esm_bundler/* createElementVNode */._)(
                    "input",
                    {
                      id: "email",
                      name: "email",
                      type: "email",
                      ref: "email_input",
                      autocomplete: "email",
                      class: "appearance-none block w-full px-3 py-2 bg-black text-white border border-slate-800 rounded-md shadow-sm placeholder-gray-400 sm:text-sm",
                      onKeypress: _cache[0] || (_cache[0] = (0,runtime_dom_esm_bundler.withModifiers)(
                        //@ts-ignore
                        (...args) => _ctx.on_keypress && _ctx.on_keypress(...args),
                        ["stop"]
                      )),
                      onKeyup: _cache[1] || (_cache[1] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                      }, ["stop"])),
                      onKeydown: _cache[2] || (_cache[2] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                      }, ["stop"]))
                    },
                    null,
                    544
                    /* HYDRATE_EVENTS, NEED_PATCH */
                  )
                ])
              ]),
              (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <label for="password">Password</label>\n						<input\n							id="password"\n							type="password"\n							ref="password_input"\n							@keypress.stop="on_keypress"\n							@keyup.stop=""\n							@keydown.stop=""\n						/> '),
              (0,runtime_core_esm_bundler/* createElementVNode */._)("div", null, [
                _hoisted_5,
                (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_6, [
                  (0,runtime_core_esm_bundler/* createElementVNode */._)(
                    "input",
                    {
                      id: "password",
                      name: "password",
                      type: "password",
                      ref: "password_input",
                      autocomplete: "current-password",
                      class: "appearance-none block w-full px-3 py-2 bg-black text-white border border-slate-800 rounded-md shadow-sm placeholder-gray-400 sm:text-sm",
                      onKeypress: _cache[3] || (_cache[3] = (0,runtime_dom_esm_bundler.withModifiers)(
                        //@ts-ignore
                        (...args) => _ctx.on_keypress && _ctx.on_keypress(...args),
                        ["stop"]
                      )),
                      onKeyup: _cache[4] || (_cache[4] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                      }, ["stop"])),
                      onKeydown: _cache[5] || (_cache[5] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                      }, ["stop"]))
                    },
                    null,
                    544
                    /* HYDRATE_EVENTS, NEED_PATCH */
                  )
                ])
              ])
            ])
          ]),
          (0,runtime_core_esm_bundler/* createCommentVNode */.kq)('<div class="text-right">\n					<div class="buttons" v-if="loading">\n						<font-awesome-icon icon="fa-solid fa-recycle" class="animate-spin" />\n					</div>\n					 <div class="buttons" v-else>\n						<div class="button clear" @click="close">Cancel</div>\n						<div class="button success" id="api_login_login" @click="save">Login</div>\n					</div> \n				</div>')
        ]),
        _ctx.loading ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_7, [
          (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_font_awesome_icon, {
            icon: "fa-solid fa-rotate",
            class: "animate-spin"
          })
        ])) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_8, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
            id: "api_login_login",
            type: "button",
            class: "w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-16 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 sm:ml-3 sm:w-auto sm:text-sm cursor-pointer",
            onClick: _cache[6] || (_cache[6] = //@ts-ignore
            (...args) => _ctx.save && _ctx.save(...args))
          }, " Login "),
          (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
            id: "dialog-prompt-cancel",
            type: "button",
            class: "mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-bg-medium hover:bg-bg-dark text-base font-medium text-text hover:text-text-light sm:mt-0 sm:w-auto sm:text-sm cursor-pointer",
            onClick: _cache[7] || (_cache[7] = //@ts-ignore
            (...args) => _ctx.close && _ctx.close(...args))
          }, " Cancel ")
        ])),
        _hoisted_9
      ]),
      _: 1
      /* STABLE */
    }, 8, ["displayed", "onClose"])
  ]);
}

;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/ApiLogin.vue?vue&type=template&id=0a579791&ts=true

// EXTERNAL MODULE: ../src/editor/components/widgets/dialogs/Modal.vue + 5 modules
var Modal = __webpack_require__(31445);
// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../src/npm_module/NpmModuleApiController.ts + 19 modules
var NpmModuleApiController = __webpack_require__(58656);
// EXTERNAL MODULE: ../src/editor/components/widgets/alert/Error.vue + 4 modules
var Error = __webpack_require__(31655);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/widgets/dialogs/ApiLogin.vue?vue&type=script&lang=ts
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};





/* harmony default export */ var ApiLoginvue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "dialog-prompt-api-login",
  components: { Modal: Modal/* default */.Z, ErrorComponent: Error/* default */.Z },
  setup() {
    const email_input = (0,reactivity_esm_bundler/* ref */.iH)();
    const password_input = (0,reactivity_esm_bundler/* ref */.iH)();
    const loading = (0,reactivity_esm_bundler/* ref */.iH)(false);
    const controller = StoreController/* StoreController.editor.dialogApiLogin */.F.editor.dialogApiLogin;
    const displayed = (0,runtime_core_esm_bundler/* computed */.Fl)(
      () => true
      /*controller.displayed()*/
    );
    const error_message = (0,runtime_core_esm_bundler/* computed */.Fl)(() => controller.errorMessage());
    const errored = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return error_message.value != null;
    });
    (0,runtime_core_esm_bundler/* onMounted */.bv)(() => {
      setTimeout(focus_and_select, 50);
      focus_and_select();
    });
    (0,runtime_core_esm_bundler/* watch */.YP)(displayed, (new_display) => {
      if (new_display) {
        setTimeout(focus_and_select, 50);
        focus_and_select();
      }
    });
    function focus_and_select() {
      var _a;
      (_a = email_input.value) == null ? void 0 : _a.focus();
    }
    function on_keypress(e) {
      if (e.code === "Enter") {
        save();
        e.preventDefault();
      }
    }
    function save() {
      return __async(this, null, function* () {
        if (email_input.value && email_input.value.value.length && password_input.value && password_input.value.value.length) {
          loading.value = true;
          yield _createToken();
        }
      });
    }
    function _createToken() {
      return __async(this, null, function* () {
        if (email_input.value && password_input.value) {
          loading.value = true;
          const email = email_input.value.value;
          const password = password_input.value.value;
          yield NpmModuleApiController/* NpmModuleApiController.sessions.create */.q.sessions.create({
            email,
            password
          });
          loading.value = false;
        }
      });
    }
    function close() {
      if (StoreController/* StoreController.editor.multiPlayer.active.value */.F.editor.multiPlayer.active.value) {
        StoreController/* StoreController.editor.dialogApiLogin.setErrorMessage */.F.editor.dialogApiLogin.setErrorMessage(
          "login is required to join a multiplayer session"
        );
        return;
      }
      loading.value = false;
      controller.hide();
    }
    return {
      email_input,
      password_input,
      loading,
      displayed,
      error_message,
      errored,
      on_keypress,
      save,
      close
    };
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/ApiLogin.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/ApiLogin.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ApiLoginvue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var ApiLogin = (__exports__);

/***/ })

}])
//# sourceMappingURL=src_editor_components_widgets_dialogs_ApiLogin_vue.a6e7d768a0200e803d4e.js.map