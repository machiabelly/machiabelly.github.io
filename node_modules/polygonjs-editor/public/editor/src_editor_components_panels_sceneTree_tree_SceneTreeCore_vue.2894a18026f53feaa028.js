(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_panels_sceneTree_tree_SceneTreeCore_vue"],{

/***/ 37460:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

const { createElementVNode: _createElementVNode, openBlock: _openBlock, createElementBlock: _createElementBlock } = __webpack_require__(61043)

module.exports = function render(_ctx, _cache) {
  return (_openBlock(), _createElementBlock("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "currentColor",
    "aria-hidden": "true"
  }, [
    _createElementVNode("path", {
      "fill-rule": "evenodd",
      d: "M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z",
      "clip-rule": "evenodd"
    })
  ]))
}

/***/ }),

/***/ 23576:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

const { createElementVNode: _createElementVNode, openBlock: _openBlock, createElementBlock: _createElementBlock } = __webpack_require__(61043)

module.exports = function render(_ctx, _cache) {
  return (_openBlock(), _createElementBlock("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "currentColor",
    "aria-hidden": "true"
  }, [
    _createElementVNode("path", {
      "fill-rule": "evenodd",
      d: "M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",
      "clip-rule": "evenodd"
    })
  ]))
}

/***/ }),

/***/ 68515:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20559);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93476);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".SceneTreeCore .scene-tree-toolbar{padding:4px}.SceneTreeCore .scene-tree-toolbar .mask-input-container{padding-right:4px;position:relative}.SceneTreeCore .scene-tree-toolbar .mask-input-container input{font-size:.8rem;width:100%;margin:0;height:2rem}.SceneTreeCore .scene-tree-toolbar .mask-input-container svg{position:absolute;top:10px;right:14px;width:14px;height:14px;cursor:pointer}.SceneTreeCore .scene-tree-toolbar .button svg{width:12px;height:12px;margin-right:5px;position:relative;top:3px}.SceneTreeCore .ag-theme-balham-dark{height:100%}.SceneTreeCore .ag-theme-balham-dark .match-mask{background-color:#166534}.SceneTreeCore .name-cell-custom-renderer svg{opacity:0;width:16px;height:16px;position:relative}.SceneTreeCore .name-cell-custom-renderer svg.expandable{opacity:1}.SceneTreeCore .name-cell-custom-renderer svg.expandable:hover{cursor:pointer}.SceneTreeCore .name-cell-custom-renderer .name-cell-custom-renderer-tree-element-name{margin-left:5px}.SceneTreeCore .name-cell-custom-renderer .name-cell-custom-renderer-tree-element-name.unnamed{opacity:.5}.SceneTreeCore .booleanProp-checkbox{cursor:pointer}.SceneTreeCore .tree-element-expand-toggle-button{cursor:pointer;padding:5px}.SceneTreeCore .tree-element-expand-toggle-button:hover{font-weight:bold}", "",{"version":3,"sources":["webpack://./../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue"],"names":[],"mappings":"AAIC,mCACC,WAAA,CACA,yDACC,iBAAA,CACA,iBAAA,CACA,+DACC,eAAA,CACA,UAAA,CACA,QAAA,CACA,WAAA,CACD,6DACC,iBAAA,CACA,QAAA,CACA,UAAA,CACA,UAAA,CACA,WAAA,CACA,cAAA,CAGD,+CACC,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,OAAA,CAEH,qCACC,WAAA,CAGA,iDACC,wBAAA,CAGD,8CACC,SAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CAEA,yDACC,SAAA,CACA,+DACC,cAAA,CACH,uFACC,eAAA,CACA,+FACC,UAAA,CACH,qCACC,cAAA,CAED,kDACC,cAAA,CACA,WAAA,CACA,wDACC,gBAAA","sourcesContent":["\n@import \"globals.sass\"\n\n.SceneTreeCore\n\t.scene-tree-toolbar\n\t\tpadding: 4px\n\t\t.mask-input-container\n\t\t\tpadding-right: 4px\n\t\t\tposition: relative\n\t\t\tinput\n\t\t\t\tfont-size: 0.8rem\n\t\t\t\twidth: 100%\n\t\t\t\tmargin: 0\n\t\t\t\theight: 2rem\n\t\t\tsvg\n\t\t\t\tposition: absolute\n\t\t\t\ttop: 10px\n\t\t\t\tright: 14px\n\t\t\t\twidth: 14px\n\t\t\t\theight: 14px\n\t\t\t\tcursor: pointer\n\n\t\t.button\n\t\t\tsvg\n\t\t\t\twidth: 12px\n\t\t\t\theight: 12px\n\t\t\t\tmargin-right: 5px\n\t\t\t\tposition: relative\n\t\t\t\ttop: 3px\n\n\t.ag-theme-balham-dark\n\t\theight: 100%\n\t\t// .row-odd\n\t\t// \tbackground-color: darken(white, 10%)\n\t\t.match-mask\n\t\t\tbackground-color: #166534 // green-800 //darken(green,12%)\n\n\t.name-cell-custom-renderer\n\t\tsvg\n\t\t\topacity: 0\n\t\t\twidth: 16px\n\t\t\theight: 16px\n\t\t\tposition: relative\n\t\t\t// top: 3px\n\t\t\t&.expandable\n\t\t\t\topacity: 1\n\t\t\t\t&:hover\n\t\t\t\t\tcursor: pointer\n\t\t.name-cell-custom-renderer-tree-element-name\n\t\t\tmargin-left: 5px\n\t\t\t&.unnamed\n\t\t\t\topacity: 0.5\n\t.booleanProp-checkbox\n\t\tcursor: pointer\n\n\t.tree-element-expand-toggle-button\n\t\tcursor: pointer\n\t\tpadding: 5px\n\t\t&:hover\n\t\t\tfont-weight: bold\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 39545:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": function() { return /* binding */ SceneTreeCore; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
// EXTERNAL MODULE: ../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js + 1 modules
var runtime_dom_esm_bundler = __webpack_require__(90996);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue?vue&type=template&id=65ff16e6&ts=true

const _hoisted_1 = { class: "SceneTreeCore h-full grid-y overflow-y-hidden" };
const _hoisted_2 = { class: "cell shrink mt-1" };
const _hoisted_3 = { class: "grid-x scene-tree-toolbar" };
const _hoisted_4 = { class: "cell auto" };
const _hoisted_5 = { class: "mask-input-container" };
const _hoisted_6 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "path",
  {
    "stroke-linecap": "round",
    "stroke-linejoin": "round",
    d: "M6 18L18 6M6 6l12 12"
  },
  null,
  -1
  /* HOISTED */
);
const _hoisted_7 = [
  _hoisted_6
];
const _hoisted_8 = { class: "cell shrink" };
const _hoisted_9 = { class: "cell auto" };
const _hoisted_10 = { class: "cell shrink" };
const _hoisted_11 = {
  ref: "gridElement",
  class: "ag-theme-balham-dark"
};
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_ArrowPathIcon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ArrowPathIcon");
  const _component_ColumnsSelector = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ColumnsSelector");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
    (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [
      (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_3, [
        (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_5, [
            (0,runtime_core_esm_bundler/* withDirectives */.wy)((0,runtime_core_esm_bundler/* createElementVNode */._)(
              "input",
              {
                class: "bg-black text-text focus:text-white rounded-md",
                type: "text",
                placeholder: "mask",
                "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => _ctx.mask = $event),
                onKeypress: _cache[1] || (_cache[1] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                }, ["stop"])),
                onKeyup: _cache[2] || (_cache[2] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                }, ["stop"])),
                onKeydown: _cache[3] || (_cache[3] = (0,runtime_dom_esm_bundler.withModifiers)(() => {
                }, ["stop"]))
              },
              null,
              544
              /* HYDRATE_EVENTS, NEED_PATCH */
            ), [
              [runtime_dom_esm_bundler.vModelText, _ctx.mask]
            ]),
            _ctx.displayMaskClearButton ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("svg", {
              key: 0,
              class: "h-6 w-6 text-text hover:text-white cursor-pointer bg-black",
              onClick: _cache[4] || (_cache[4] = //@ts-ignore
              (...args) => _ctx.clearMask && _ctx.clearMask(...args)),
              xmlns: "http://www.w3.org/2000/svg",
              fill: "none",
              viewBox: "0 0 24 24",
              stroke: "currentColor",
              "stroke-width": "2"
            }, _hoisted_7)) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true)
          ])
        ]),
        (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_8, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
            onClick: _cache[5] || (_cache[5] = //@ts-ignore
            (...args) => _ctx.reload && _ctx.reload(...args)),
            type: "button",
            class: "cursor-pointer inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          }, [
            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ArrowPathIcon, {
              class: "-ml-0.5 mr-2 h-4 w-4",
              "aria-hidden": "true"
            }),
            (0,runtime_core_esm_bundler/* createTextVNode */.Uk)(" Reload ")
          ])
        ])
      ])
    ]),
    (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_9, [
      (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_10, [
        (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ColumnsSelector, {
          headerNames: _ctx.headerNames,
          visibleHeaderNames: _ctx.visibleHeaderNames,
          onToggleHeaderName: _ctx.toggleHeaderName,
          onSelectAllHeaderNames: _ctx.selectAllHeaderNames,
          onSelectNoHeaderNames: _ctx.selectNoHeaderNames
        }, null, 8, ["headerNames", "visibleHeaderNames", "onToggleHeaderName", "onSelectAllHeaderNames", "onSelectNoHeaderNames"])
      ]),
      (0,runtime_core_esm_bundler/* createElementVNode */._)(
        "div",
        _hoisted_11,
        null,
        512
        /* NEED_PATCH */
      ),
      (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <ag-grid-vue\n				class="ag-theme-balham"\n				:rowData="rowData"\n				:columnDefs="columnDefs"\n				:modules="modules"\n				:defaultColDef="defaultColDef"\n				:columnTypes="columnTypes"\n				:getRowClass="getRowClass"\n				:rowClassRules="rowClassRules"\n				@gridReady="onGridReady"\n			></ag-grid-vue> ')
    ])
  ]);
}

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue?vue&type=template&id=65ff16e6&ts=true

// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../src/editor/components/panels/viewer/mixins/controls/_BaseTransform.ts + 2 modules
var _BaseTransform = __webpack_require__(2866);
// EXTERNAL MODULE: ../node_modules/ag-grid-community/dist/ag-grid-community.cjs.js
var ag_grid_community_cjs = __webpack_require__(3232);
;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/grid/NameCellRenderer.ts

const OPEN = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
<path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
</svg>`;
const CLOSED = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
<path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
</svg>`;
class NameCellRenderer {
  static setOnNameClickCallback(callback) {
    this._onNameClickCallback = callback;
  }
  static setOnExpandToggleClickCallback(callback) {
    this._onExpandToggleClickCallback = callback;
  }
  // init method gets the details of the cell to be renderer
  init(params) {
    this.eGui = document.createElement("div");
    this.eGui.classList.add("cursor-pointer");
    const treeElement = params.data;
    const container = document.createElement("span");
    container.classList.add("name-cell-custom-renderer");
    const alignmentPrefix = document.createElement("span");
    alignmentPrefix.style.display = "inline-block";
    alignmentPrefix.style.paddingLeft = `${1 * treeElement.level}rem`;
    const nameElement = document.createElement("span");
    nameElement.classList.add("name-cell-custom-renderer-tree-element-name");
    nameElement.innerText = treeElement.name || "no name";
    if (treeElement.name == void 0 || treeElement.name == "") {
    }
    this.eGui.addEventListener("pointerdown", () => {
      if (NameCellRenderer._onNameClickCallback) {
        NameCellRenderer._onNameClickCallback(treeElement);
      } else {
        console.log("no _onNameClickCallback callback");
      }
    });
    container.appendChild(alignmentPrefix);
    container.appendChild(this._expandIcon(treeElement));
    container.appendChild(nameElement);
    this.eGui.appendChild(container);
  }
  _expandIcon(treeElement) {
    const dummy = document.createElement("div");
    const expandIcon = treeElement.expandable ? treeElement.expanded ? OPEN : CLOSED : CLOSED;
    dummy.innerHTML = expandIcon;
    const svg = dummy.children[0];
    svg.style.display = "inline-block";
    if (treeElement.expandable) {
      svg.classList.add("expandable");
      svg.addEventListener("pointerdown", (e) => {
        if (NameCellRenderer._onExpandToggleClickCallback) {
          NameCellRenderer._onExpandToggleClickCallback(treeElement);
          e.preventDefault();
          e.stopImmediatePropagation();
          e.stopPropagation();
          return false;
        } else {
          console.warn("no _onExpandToggleClickCallback callback");
        }
      });
    }
    return svg;
  }
  getGui() {
    return this.eGui;
  }
  refresh(params) {
    return false;
  }
}

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/SceneTreeUtils.ts

class SceneTreeUtilsClass {
  constructor() {
    this._treeElementByObject3D = /* @__PURE__ */ new Map();
    this._object3DByTreeElement = /* @__PURE__ */ new Map();
  }
  clear() {
    this._treeElementByObject3D.clear();
    this._object3DByTreeElement.clear();
  }
  // addObjectAsScene(object: Object3D, treeElement: TreeElement) {
  // 	this._treeElementByObject3D.set(object.uuid, treeElement);
  // }
  addObject(object, treeElement) {
    this._treeElementByObject3D.set(object.uuid, treeElement);
    this._object3DByTreeElement.set(treeElement.uuid, object);
  }
  getTreeElement(object) {
    return this._treeElementByObject3D.get(object.uuid);
  }
  getObject(treeElement) {
    return this._object3DByTreeElement.get(treeElement.uuid);
  }
}
const SceneTreeUtils = new SceneTreeUtilsClass();

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/grid/CheckboxCellRenderer.ts


class CheckboxCellRenderer {
  constructor() {
    // private static _object3DByTreeElement: Map<TreeElement, Object3D> | undefined;
    // static setObject3DByTreeElement(map: Map<TreeElement, Object3D>) {
    // 	this._object3DByTreeElement = map;
    // }
    // init method gets the details of the cell to be renderer
    this._container = document.createElement("div");
  }
  init(params) {
    this.eGui = document.createElement("span");
    const treeElement = params.data;
    this._container.classList.add("booleanProp-checkbox");
    this.eGui.append(this._container);
    this._updateContent(treeElement);
    this._container.addEventListener("pointerdown", () => {
      treeElement[this.propertyName] = !treeElement[this.propertyName];
      const object = SceneTreeUtils.getObject(treeElement);
      if (object) {
        object[this.propertyName] = treeElement[this.propertyName];
      } else {
        console.warn("object not found", treeElement, SceneTreeUtils);
      }
      this.refresh(params);
    });
  }
  _updateContent(treeElement) {
    const content = treeElement[this.propertyName] ? "\u2705" : "\u274C";
    this._container.innerText = content;
  }
  getGui() {
    return this.eGui;
  }
  refresh(params) {
    const treeElement = params.data;
    this._updateContent(treeElement);
    return true;
  }
}
class CheckboxCellRendererVisible extends CheckboxCellRenderer {
  constructor() {
    super(...arguments);
    this.propertyName = "visible";
  }
}
class CheckboxCellRendererMatrixAutoUpdate extends CheckboxCellRenderer {
  constructor() {
    super(...arguments);
    this.propertyName = "matrixAutoUpdate";
  }
}

// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/Type.ts
var Type = __webpack_require__(19037);
;// CONCATENATED MODULE: ../@polygonjs/polygonjs/src/engine/scene/utils/actors/ActorsManagerUtils.ts

function actorNodesForObject(object, scene) {
  const actorsManager = scene.actorsManager;
  const nodeIds = actorsManager.objectActorNodeIds(object);
  if (!nodeIds) {
    return;
  }
  const actorBuilderNodes = nodeIds.map((nodeId) => scene.graph.nodeFromId(nodeId)).filter((node) => node);
  return actorBuilderNodes;
}

// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/geometry/CorePath.ts
var CorePath = __webpack_require__(60074);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/geometry/ObjectContent.ts
var ObjectContent = __webpack_require__(91057);
// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.js
var shared_esm_bundler = __webpack_require__(13053);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/sceneTree/tree/components/ColumnsSelector.vue?vue&type=template&id=2846a148&ts=true

const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_1 = { class: "relative w-36" };
const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_2 = { class: "block truncate" };
const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_3 = { class: "absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none" };
const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_4 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "span",
  {
    class: /* @__PURE__ */ (0,shared_esm_bundler/* normalizeClass */.C_)(["font-normal", "block truncate"])
  },
  " Select All ",
  -1
  /* HOISTED */
);
const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_5 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "span",
  {
    class: /* @__PURE__ */ (0,shared_esm_bundler/* normalizeClass */.C_)(["font-normal", "block truncate"])
  },
  " Select None ",
  -1
  /* HOISTED */
);
const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_6 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "div",
  { class: "py-1 px-2" },
  [
    /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)("div", { class: "block h-px bg-gray-400" })
  ],
  -1
  /* HOISTED */
);
const ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_7 = ["onClick"];
function ColumnsSelectorvue_type_template_id_2846a148_ts_true_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_ChevronUpDownIcon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ChevronUpDownIcon");
  const _component_ListboxButton = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ListboxButton");
  const _component_CheckIcon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("CheckIcon");
  const _component_ListboxOption = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ListboxOption");
  const _component_XMarkIcon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("XMarkIcon");
  const _component_ListboxOptions = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ListboxOptions");
  const _component_Listbox = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Listbox");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_Listbox, { as: "div" }, {
    default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
      (0,runtime_core_esm_bundler/* createElementVNode */._)("div", ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_1, [
        (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ListboxButton, { class: "relative w-full bg-black border border-black rounded-md shadow-sm pl-3 pr-10 py-1 text-left cursor-pointer focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" }, {
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
            (0,runtime_core_esm_bundler/* createElementVNode */._)(
              "span",
              ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_2,
              (0,shared_esm_bundler/* toDisplayString */.zw)(_ctx.displayedLabel),
              1
              /* TEXT */
            ),
            (0,runtime_core_esm_bundler/* createElementVNode */._)("span", ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_3, [
              (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ChevronUpDownIcon, {
                class: "h-5 w-5 text-text-light",
                "aria-hidden": "true"
              })
            ])
          ]),
          _: 1
          /* STABLE */
        }),
        (0,runtime_core_esm_bundler/* createVNode */.Wm)(runtime_dom_esm_bundler.Transition, {
          "leave-active-class": "transition ease-in duration-100",
          "leave-from-class": "opacity-100",
          "leave-to-class": "opacity-0"
        }, {
          default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ListboxOptions, { class: "absolute z-10 mt-1 w-full bg-black shadow-xl shadow-slate-600 max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm" }, {
              default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
                ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_ListboxOption, {
                  as: "template",
                  key: "__ALL__",
                  value: "__ALL__"
                }, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(({ active }) => [
                    (0,runtime_core_esm_bundler/* createElementVNode */._)(
                      "li",
                      {
                        class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                          active ? "text-text-light bg-bg-light" : "text-text-faded",
                          "cursor-pointer select-none relative py-2 pl-8 pr-4"
                        ]),
                        onClick: _cache[0] || (_cache[0] = //@ts-ignore
                        (...args) => _ctx.selectAll && _ctx.selectAll(...args))
                      },
                      [
                        ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_4,
                        (0,runtime_core_esm_bundler/* createElementVNode */._)(
                          "span",
                          {
                            class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                              active ? "text-text-light bg-bg-light" : "text-text-faded",
                              "absolute inset-y-0 left-0 flex items-center pl-1"
                            ])
                          },
                          [
                            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_CheckIcon, {
                              class: "h-5 w-5 text-green-600",
                              "aria-hidden": "true"
                            })
                          ],
                          2
                          /* CLASS */
                        )
                      ],
                      2
                      /* CLASS */
                    )
                  ]),
                  _: 1
                  /* STABLE */
                })),
                ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_ListboxOption, {
                  as: "template",
                  key: "__NONE__",
                  value: "__NONE__"
                }, {
                  default: (0,runtime_core_esm_bundler/* withCtx */.w5)(({ active }) => [
                    (0,runtime_core_esm_bundler/* createElementVNode */._)(
                      "li",
                      {
                        class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                          active ? "text-text-light bg-bg-light" : "text-text-faded",
                          "cursor-pointer select-none relative py-2 pl-8 pr-4"
                        ]),
                        onClick: _cache[1] || (_cache[1] = //@ts-ignore
                        (...args) => _ctx.selectNone && _ctx.selectNone(...args))
                      },
                      [
                        ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_5,
                        (0,runtime_core_esm_bundler/* createElementVNode */._)(
                          "span",
                          {
                            class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                              active ? "text-text-light" : "text-text-faded",
                              "absolute inset-y-0 left-0 flex items-center pl-1"
                            ])
                          },
                          [
                            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_XMarkIcon, {
                              class: "h-5 w-5 text-red-500",
                              "aria-hidden": "true"
                            })
                          ],
                          2
                          /* CLASS */
                        )
                      ],
                      2
                      /* CLASS */
                    )
                  ]),
                  _: 1
                  /* STABLE */
                })),
                ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_6,
                ((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(
                  runtime_core_esm_bundler/* Fragment */.HY,
                  null,
                  (0,runtime_core_esm_bundler/* renderList */.Ko)(_ctx.headerNames, (headerName, i) => {
                    return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_ListboxOption, {
                      as: "template",
                      key: i,
                      value: _ctx.headerVisibleStates[i]
                    }, {
                      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(({ active }) => [
                        (0,runtime_core_esm_bundler/* createElementVNode */._)("li", {
                          class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                            active ? "text-text-light bg-bg-light" : "text-text-faded",
                            "cursor-pointer select-none relative py-2 pl-8 pr-4"
                          ]),
                          onClick: ($event) => _ctx.toggleHeaderName($event, headerName)
                        }, [
                          (0,runtime_core_esm_bundler/* createElementVNode */._)(
                            "span",
                            {
                              class: (0,shared_esm_bundler/* normalizeClass */.C_)([_ctx.headerVisibleStates[i] ? "font-semibold" : "font-normal", "block truncate"])
                            },
                            (0,shared_esm_bundler/* toDisplayString */.zw)(headerName),
                            3
                            /* TEXT, CLASS */
                          ),
                          _ctx.headerVisibleStates[i] ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(
                            "span",
                            {
                              key: 0,
                              class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                                active ? "text-white" : "text-text-faded",
                                "absolute inset-y-0 left-0 flex items-center pl-1"
                              ])
                            },
                            [
                              (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_CheckIcon, {
                                class: "h-5 w-5",
                                "aria-hidden": "true"
                              })
                            ],
                            2
                            /* CLASS */
                          )) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true)
                        ], 10, ColumnsSelectorvue_type_template_id_2846a148_ts_true_hoisted_7)
                      ]),
                      _: 2
                      /* DYNAMIC */
                    }, 1032, ["value"]);
                  }),
                  128
                  /* KEYED_FRAGMENT */
                ))
              ]),
              _: 1
              /* STABLE */
            })
          ]),
          _: 1
          /* STABLE */
        })
      ])
    ]),
    _: 1
    /* STABLE */
  });
}

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/components/ColumnsSelector.vue?vue&type=template&id=2846a148&ts=true

// EXTERNAL MODULE: ../node_modules/@headlessui/vue/dist/components/listbox/listbox.js
var listbox = __webpack_require__(7630);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/solid/ChevronUpDownIcon.js
var ChevronUpDownIcon = __webpack_require__(12454);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/solid/CheckIcon.js
var CheckIcon = __webpack_require__(75502);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/solid/XMarkIcon.js
var XMarkIcon = __webpack_require__(23576);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/sceneTree/tree/components/ColumnsSelector.vue?vue&type=script&lang=ts



/* harmony default export */ var ColumnsSelectorvue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  emit: ["toggleHeaderName", "selectAllHeaderNames", "selectNoHeaderNames"],
  name: "columns-select-input",
  components: {
    ChevronUpDownIcon: ChevronUpDownIcon,
    CheckIcon: CheckIcon,
    XMarkIcon: XMarkIcon,
    Listbox: listbox/* Listbox */.Ri,
    ListboxButton: listbox/* ListboxButton */.Y4,
    ListboxLabel: listbox/* ListboxLabel */.xX,
    ListboxOption: listbox/* ListboxOption */.wt,
    ListboxOptions: listbox/* ListboxOptions */.O_
  },
  props: {
    headerNames: {
      type: Array,
      required: true,
      default() {
        return [];
      }
    },
    visibleHeaderNames: {
      type: Array,
      required: true,
      default() {
        return [];
      }
    }
  },
  setup(props, { emit }) {
    function toggleHeaderName(event, entry) {
      emit("toggleHeaderName", entry);
    }
    function selectAll(event) {
      emit("selectAllHeaderNames");
    }
    function selectNone(event) {
      emit("selectNoHeaderNames");
    }
    const displayedLabel = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return `${props.visibleHeaderNames.length}/${props.headerNames.length} ${props.headerNames.length == 1 ? "column" : "columns"}`;
    });
    const headerVisibleStates = (0,runtime_core_esm_bundler/* computed */.Fl)(
      () => props.headerNames.map((name) => props.visibleHeaderNames.includes(name))
    );
    return { displayedLabel, headerVisibleStates, toggleHeaderName, selectNone, selectAll };
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/components/ColumnsSelector.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/components/ColumnsSelector.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(ColumnsSelectorvue_type_script_lang_ts, [['render',ColumnsSelectorvue_type_template_id_2846a148_ts_true_render]])

/* harmony default export */ var ColumnsSelector = (__exports__);
;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/grid/Common.ts

var HeaderName = /* @__PURE__ */ ((HeaderName2) => {
  HeaderName2["TYPE"] = "type";
  HeaderName2["MATRIX_AUTO_UPDATE"] = "matrixAutoUpdate";
  HeaderName2["VISIBLE"] = "visible";
  HeaderName2["UUID"] = "uuid";
  HeaderName2["MATERIAL_TYPE"] = "material type";
  HeaderName2["MATERIAL_NAME"] = "material name";
  HeaderName2["MATERIAL_UUID"] = "material uuid";
  HeaderName2["ACTOR_NODES"] = "actor nodes";
  HeaderName2["LAYERS"] = "layers";
  return HeaderName2;
})(HeaderName || {});

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/mixins/SelectedColumns.ts

function SetupSelectedColumns(options) {
  const { columnDisplayStates } = options;
  function toggleHeaderName(headerName) {
    const state = columnDisplayStates.value[headerName];
    if (state == null) {
      columnDisplayStates.value[headerName] = true;
    } else {
      columnDisplayStates.value[headerName] = !state;
    }
  }
  function selectAllHeaderNames() {
    const headerNames = Object.keys(columnDisplayStates.value);
    for (const headerName of headerNames) {
      columnDisplayStates.value[headerName] = true;
    }
  }
  function selectNoHeaderNames() {
    const headerNames = Object.keys(columnDisplayStates.value);
    for (const headerName of headerNames) {
      columnDisplayStates.value[headerName] = false;
    }
  }
  return {
    // toggleColumnDisplayState,
    toggleHeaderName,
    selectAllHeaderNames,
    selectNoHeaderNames
  };
}

// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/solid/ArrowPathIcon.js
var ArrowPathIcon = __webpack_require__(37460);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/geometry/Constant.ts
var Constant = __webpack_require__(91568);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue?vue&type=script&lang=ts
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};


















const NAME_COLUMN_NAME = "name";
const NAME_COLUMN = {
  headerName: NAME_COLUMN_NAME,
  field: "name",
  type: "",
  cellRenderer: NameCellRenderer
  // cellStyle: 'name-column',
};
const OTHER_COLUMNS = [
  {
    headerName: HeaderName.TYPE,
    field: "type"
  },
  {
    headerName: HeaderName.MATRIX_AUTO_UPDATE,
    field: "matrixAutoUpdate",
    cellRenderer: CheckboxCellRendererMatrixAutoUpdate
    // type: 'boolean',
  },
  {
    headerName: HeaderName.VISIBLE,
    field: "visible",
    cellRenderer: CheckboxCellRendererVisible
    // type: 'boolean',
  },
  {
    headerName: HeaderName.UUID,
    field: "uuid"
    // cellRenderer: CheckboxCellRenderer,
    // type: 'boolean',
  },
  {
    headerName: HeaderName.MATERIAL_TYPE,
    field: "materialType"
    // type: 'boolean',
  },
  {
    headerName: HeaderName.MATERIAL_NAME,
    field: "materialName"
    // type: 'boolean',
  },
  {
    headerName: HeaderName.MATERIAL_UUID,
    field: "materialUuid"
    // type: 'boolean',
  },
  {
    headerName: HeaderName.ACTOR_NODES,
    field: "actorNodes"
    // type: 'boolean',
  },
  {
    headerName: HeaderName.LAYERS,
    field: "layers"
    // type: 'boolean',
  }
];
const ALL_COLUMNS = [NAME_COLUMN].concat(OTHER_COLUMNS);
const DEFAULT_MASK = "*";
/* harmony default export */ var SceneTreeCorevue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "scene-tree-core",
  // @ts-ignore
  components: {
    ColumnsSelector: ColumnsSelector,
    ArrowPathIcon: ArrowPathIcon
    // AgGridVue: AgGridVue as any,
  },
  props: {
    maskOnStart: {
      type: String,
      default: DEFAULT_MASK
    },
    showNamesOnly: {
      type: Boolean,
      default: true
    }
  },
  setup(props, context) {
    let grid;
    const gridElement = (0,reactivity_esm_bundler/* ref */.iH)(null);
    const threejsScene = StoreController/* StoreController.scene.threejsScene */.F.scene.threejsScene();
    const controller = StoreController/* StoreController.editor.panelObjectMask */.F.editor.panelObjectMask;
    const useCoreGroup = (0,runtime_core_esm_bundler/* computed */.Fl)(() => controller.useCoreGroup());
    function _rootObjects() {
      var _a;
      if (useCoreGroup.value) {
        return ((_a = controller.coreGroup()) == null ? void 0 : _a.allObjects()) || [threejsScene];
      }
      return [threejsScene];
    }
    const dataTree = (0,reactivity_esm_bundler/* ref */.iH)([]);
    let columnApi;
    let gridApi;
    const mask = (0,reactivity_esm_bundler/* ref */.iH)(props.maskOnStart);
    const columnDisplayStates = (0,reactivity_esm_bundler/* ref */.iH)({
      [HeaderName.TYPE]: true,
      [HeaderName.MATRIX_AUTO_UPDATE]: false,
      [HeaderName.VISIBLE]: true,
      [HeaderName.UUID]: false,
      [HeaderName.MATERIAL_TYPE]: false,
      [HeaderName.MATERIAL_NAME]: true,
      [HeaderName.MATERIAL_UUID]: false,
      [HeaderName.ACTOR_NODES]: true,
      [HeaderName.LAYERS]: false
    });
    const headerNames = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return Object.keys(columnDisplayStates.value);
    });
    const visibleHeaderNames = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return headerNames.value.filter((name) => columnDisplayStates.value[name]);
    });
    const setupSelectedColumns = SetupSelectedColumns({ columnDisplayStates });
    const displayMaskClearButton = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return mask.value != props.maskOnStart;
    });
    function clearMask() {
      mask.value = props.maskOnStart;
    }
    (0,runtime_core_esm_bundler/* watch */.YP)(mask, () => {
      updateObjectsMatchingMask();
      gridApi == null ? void 0 : gridApi.applyTransaction({ update: rowData.value });
      _sendMaskUpdated();
    });
    (0,runtime_core_esm_bundler/* onMounted */.bv)(_sendMaskUpdated);
    function _sendMaskUpdated() {
      context.emit("maskUpdated", mask.value);
    }
    function _object3DToTreeElement(object, level) {
      var _a;
      let material = object.material;
      material = Type/* CoreType.isArray */.MR.isArray(material) ? material[0] : material;
      const _layers = (object2) => {
        const numbers = [];
        for (let i = 0; i < 32; i++) {
          if (object2.layers.isEnabled(i)) {
            numbers.push(i);
          }
        }
        return numbers;
      };
      return {
        type: (0,Constant/* dataFromObject */.$5)(object).humanName,
        matchesMask: false,
        expanded: true,
        expandable: object.children.length > 0,
        level,
        uuid: object.uuid,
        name: object.name,
        matrixAutoUpdate: object.matrixAutoUpdate,
        visible: object.visible,
        // children
        children: [],
        // material
        materialType: material ? material.constructor.name : void 0,
        materialUuid: material ? material.uuid : void 0,
        materialName: material ? material.name : void 0,
        // actors
        actorNodes: ((_a = actorNodesForObject(object, StoreController/* StoreController.scene */.F.scene)) == null ? void 0 : _a.map((n) => n.path()).join(",")) || "",
        layers: _layers(object).join(",")
      };
    }
    function _traverseObject3D(object, callback, level = 0) {
      if (object instanceof _BaseTransform/* TransformControls */.Ys) {
        return;
      }
      const children = object.children;
      callback(object, level);
      for (let child of children) {
        _traverseObject3D(child, callback, level + 1);
      }
    }
    (0,runtime_core_esm_bundler/* onMounted */.bv)(() => {
      _populateTreeData();
    });
    (0,runtime_core_esm_bundler/* onUnmounted */.Ah)(() => {
    });
    function _resetTreeData() {
      dataTree.value.splice(0, dataTree.value.length);
    }
    function _populateTreeData() {
      _resetTreeData();
      SceneTreeUtils.clear();
      const rootObjects = _rootObjects();
      for (const rootObject of rootObjects) {
        if ((0,ObjectContent/* isObject3D */.nK)(rootObject)) {
          _traverseObject3D(rootObject, (object, level) => {
            const treeElement = _object3DToTreeElement(object, level);
            SceneTreeUtils.addObject(object, treeElement);
            if (object === rootObject) {
              dataTree.value.push(treeElement);
            } else {
              const parent = object.parent;
              if (parent) {
                const parentTreeElement = SceneTreeUtils.getTreeElement(parent);
                if (parentTreeElement) {
                  parentTreeElement.children.push(treeElement);
                }
              }
            }
          });
        }
      }
      updateObjectsMatchingMask();
      (0,runtime_core_esm_bundler/* nextTick */.Y3)(_buildGrid);
    }
    function _objectsInMask() {
      const objects = [];
      const rootObjects = _rootObjects();
      for (const rootObject of rootObjects) {
        if ((0,ObjectContent/* isObject3D */.nK)(rootObject)) {
          const objectsInMask = StoreController/* StoreController.scene.objectsByMask */.F.scene.objectsByMask(mask.value, rootObject);
          for (const objectInMask of objectsInMask) {
            objects.push(objectInMask);
          }
        }
      }
      return objects;
    }
    function updateObjectsMatchingMask() {
      const objectsInMask = _objectsInMask();
      for (let treeElement of rowData.value) {
        treeElement.matchesMask = false;
      }
      for (let object of objectsInMask) {
        const treeElement = SceneTreeUtils.getTreeElement(object);
        if (treeElement) {
          treeElement.matchesMask = true;
        }
      }
    }
    function reload() {
      _populateTreeData();
    }
    const rowData = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      const list = [];
      function _traverseTreeElement(treeElement) {
        list.push(treeElement);
        if (treeElement.expanded) {
          const children = treeElement.children;
          for (let child of children) {
            _traverseTreeElement(child);
          }
        }
      }
      const treeElements = dataTree.value;
      for (const treeElement of treeElements) {
        _traverseTreeElement(treeElement);
      }
      return list;
    });
    function toggleTreeElementExpandedState(treeElement) {
      treeElement.expanded = !treeElement.expanded;
      _buildGrid();
    }
    function _currentParent(object) {
      const rootObjects = _rootObjects();
      let currentParent;
      for (const rootObject of rootObjects) {
        if (rootObject == object) {
          currentParent = object;
        }
      }
      if (!currentParent) {
        object.traverseAncestors((parentObject) => {
          for (const rootObject of rootObjects) {
            if (rootObject == parentObject) {
              currentParent = parentObject;
            }
          }
        });
      }
      return currentParent;
    }
    function _onNameClickCallback(treeElement) {
      const object = SceneTreeUtils.getObject(treeElement);
      if (!object) {
        console.log("no object found for name callback");
        return;
      }
      const maskElements = mask.value.split(" ");
      const currentParent = _currentParent(object);
      const inclusionFilter = CorePath/* CorePath.objectPath */.Oj.objectPath(object, currentParent);
      const exclusionFilter = "^" + inclusionFilter;
      if (treeElement.matchesMask) {
        const index = maskElements.indexOf(inclusionFilter);
        if (index >= 0) {
          maskElements.splice(index, 1);
          mask.value = maskElements.join(" ");
        } else {
          mask.value += ` ${exclusionFilter}`;
        }
      } else {
        const index = maskElements.indexOf(exclusionFilter);
        if (index >= 0) {
          maskElements.splice(index, 1);
          mask.value = maskElements.join(" ");
        } else {
          mask.value += ` ${inclusionFilter}`;
        }
      }
    }
    const columnDefs = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return props.showNamesOnly ? [NAME_COLUMN] : ALL_COLUMNS.filter(
        (c) => c.headerName == NAME_COLUMN_NAME || columnDisplayStates.value[c.headerName]
      );
    });
    const defaultColDef = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return {
        editable: false,
        width: props.showNamesOnly ? 400 : 200,
        sortable: true,
        resizable: true
      };
    });
    const columnTypes = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return {
        indexColumn: {
          editable: false,
          width: 50
        }
      };
    });
    function getRowClass(params) {
      const rowIndex = params.node.rowIndex;
      if (rowIndex == null) {
        return;
      }
      if (rowIndex % 2 === 0) {
        return "row-odd";
      }
    }
    const rowClassRules = {
      // row style function
      "match-mask": function(params) {
        const treeElement = params.data;
        return treeElement.matchesMask;
      }
    };
    function onGridReady(event) {
      columnApi = event.columnApi;
      gridApi = event.api;
      _resizeColumns();
    }
    function _resizeColumns() {
      columnApi == null ? void 0 : columnApi.autoSizeAllColumns();
    }
    NameCellRenderer.setOnNameClickCallback(_onNameClickCallback);
    NameCellRenderer.setOnExpandToggleClickCallback(toggleTreeElementExpandedState);
    (0,runtime_core_esm_bundler/* onMounted */.bv)(_buildGrid);
    (0,runtime_core_esm_bundler/* onUnmounted */.Ah)(_unmountGrid);
    function _unmountGrid() {
      if (!grid) {
        return;
      }
      grid.destroy();
      columnApi = void 0;
      gridApi = void 0;
      grid = void 0;
    }
    (0,runtime_core_esm_bundler/* watch */.YP)(columnDefs, updateRowData, { deep: true });
    function _buildGrid() {
      if (grid) {
        _unmountGrid();
      }
      if (!gridElement.value) {
        return;
      }
      const gridOptions = {
        // modules: AllCommunityModules as any,
        columnDefs: columnDefs.value,
        rowData: rowData.value,
        defaultColDef: defaultColDef.value,
        columnTypes: columnTypes.value,
        rowClassRules,
        onGridReady,
        getRowClass
        // modules: modules,
      };
      grid = new ag_grid_community_cjs/* Grid */.rjZ(gridElement.value, gridOptions);
    }
    function updateRowData() {
      _buildGrid();
    }
    return __spreadValues({
      gridElement,
      mask,
      clearMask,
      displayMaskClearButton,
      toggleTreeElementExpandedState,
      rowData,
      columnDefs,
      // modules: AllCommunityModules,
      defaultColDef,
      columnTypes,
      getRowClass,
      rowClassRules,
      onGridReady,
      // onCellClicked,
      reload,
      headerNames,
      visibleHeaderNames
    }, setupSelectedColumns);
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue?vue&type=style&index=0&id=65ff16e6&lang=sass
var SceneTreeCorevue_type_style_index_0_id_65ff16e6_lang_sass = __webpack_require__(19278);
;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue?vue&type=style&index=0&id=65ff16e6&lang=sass

;// CONCATENATED MODULE: ../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue




;


const SceneTreeCore_exports_ = /*#__PURE__*/(0,exportHelper/* default */.Z)(SceneTreeCorevue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var SceneTreeCore = (SceneTreeCore_exports_);

/***/ }),

/***/ 19278:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(68515);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.id, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = (__webpack_require__(49441)/* ["default"] */ .Z)
var update = add("388c09e4", content, false, {});
// Hot Module Replacement
if(false) {}

/***/ })

}])
//# sourceMappingURL=src_editor_components_panels_sceneTree_tree_SceneTreeCore_vue.2894a18026f53feaa028.js.map