(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_panels_params_components_extras_nodes_cop_SDFExporter_vue"],{

/***/ 98333:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

const { createElementVNode: _createElementVNode, openBlock: _openBlock, createElementBlock: _createElementBlock } = __webpack_require__(61043)

module.exports = function render(_ctx, _cache) {
  return (_openBlock(), _createElementBlock("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    "stroke-width": "1.5",
    stroke: "currentColor",
    "aria-hidden": "true"
  }, [
    _createElementVNode("path", {
      "stroke-linecap": "round",
      "stroke-linejoin": "round",
      d: "M12 9.75v6.75m0 0l-3-3m3 3l3-3m-8.25 6a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"
    })
  ]))
}

/***/ }),

/***/ 384:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ SDFExporter; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/params/components/extras/nodes/cop/SDFExporter.vue?vue&type=template&id=55ae359e&ts=true

const _hoisted_1 = {
  key: 0,
  class: "w-full"
};
const _hoisted_2 = { class: "grid-x w-full" };
const _hoisted_3 = { class: "cell auto" };
const _hoisted_4 = { class: "inline-flex w-full" };
const _hoisted_5 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "span",
  null,
  "Download SDF",
  -1
  /* HOISTED */
);
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_CloudArrowDownIcon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("CloudArrowDownIcon");
  return _ctx.displayed ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
    (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [
      (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <div class="cell small-3"></div> '),
      (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_3, [
        (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
            type: "button",
            class: "grow inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 sm:w-auto sm:text-sm cursor-pointer",
            onClick: _cache[0] || (_cache[0] = //@ts-ignore
            (...args) => _ctx.download && _ctx.download(...args)),
            id: "cop-sdfexporter-download-button"
          }, [
            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_CloudArrowDownIcon, {
              class: "mr-3 h-5 w-5",
              "aria-hidden": "true"
            }),
            _hoisted_5
          ])
        ])
      ])
    ])
  ])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true);
}

;// CONCATENATED MODULE: ../src/editor/components/panels/params/components/extras/nodes/cop/SDFExporter.vue?vue&type=template&id=55ae359e&ts=true

// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/outline/CloudArrowDownIcon.js
var CloudArrowDownIcon = __webpack_require__(98333);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/loader/geometry/SDF.ts
var SDF = __webpack_require__(87737);
// EXTERNAL MODULE: ../src/npm_module/NpmModuleApiController.ts + 19 modules
var NpmModuleApiController = __webpack_require__(58656);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/panels/params/components/extras/nodes/cop/SDFExporter.vue?vue&type=script&lang=ts
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};





/* harmony default export */ var SDFExportervue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "SDFExporter",
  components: { CloudArrowDownIcon: CloudArrowDownIcon },
  props: {
    nodeId: {
      type: Number,
      default: null
    }
  },
  setup(props) {
    const node = StoreController/* StoreController.engine.node */.F.engine.node(props.nodeId);
    const displayed = (0,reactivity_esm_bundler/* ref */.iH)(node != null);
    if (!node) {
      console.warn("null: no node found");
    }
    function download(e) {
      return __async(this, null, function* () {
        const container = yield node.compute();
        const texture = container.content();
        const dataContainer = texture == null ? void 0 : texture.image;
        if (!dataContainer) {
          return;
        }
        const dataWithMetadata = (0,SDF/* saveSDFMetadata */.i7)(texture);
        if (!dataWithMetadata) {
          return;
        }
        const blob = new Blob([dataWithMetadata], { type: "octet/stream" });
        NpmModuleApiController/* NpmModuleApiController.nodeFiles.download */.q.nodeFiles.download({ blob, fileName: `textures/sdf/${node.name()}.bin` });
      });
    }
    return {
      displayed,
      download
    };
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/panels/params/components/extras/nodes/cop/SDFExporter.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/panels/params/components/extras/nodes/cop/SDFExporter.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(SDFExportervue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var SDFExporter = (__exports__);

/***/ })

}])
//# sourceMappingURL=src_editor_components_panels_params_components_extras_nodes_cop_SDFExporter_vue.c94ead52e639e169a042.js.map