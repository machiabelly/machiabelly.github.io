(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_widgets_dialogs_polyNode_PolyNodeUpdateForm_vue"],{

/***/ 34817:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20559);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93476);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".PolyNodeUpdateForm .tabs .tab{display:inline-block;padding:10px 20px;cursor:pointer;opacity:.8}.PolyNodeUpdateForm .tabs .tab.active{opacity:1}.PolyNodeUpdateForm form{padding:10px}.PolyNodeUpdateForm form input{margin:0}.PolyNodeUpdateForm .buttons{padding:10px;margin-bottom:0px}.PolyNodeUpdateForm .buttons .button{margin-bottom:0px}", "",{"version":3,"sources":["webpack://./../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue"],"names":[],"mappings":"AAME,+BACC,oBAAA,CACA,iBAAA,CACA,cAAA,CACA,UAAA,CAEA,sCACC,SAAA,CAGH,yBACC,YAAA,CACA,+BACC,QAAA,CAEF,6BACC,YAAA,CACA,iBAAA,CACA,qCACC,iBAAA","sourcesContent":["\n\n.PolyNodeUpdateForm\n\t// background-color: white\n\n\t.tabs\n\t\t.tab\n\t\t\tdisplay: inline-block\n\t\t\tpadding: 10px 20px\n\t\t\tcursor: pointer\n\t\t\topacity: 0.8\n\t\t\t// border-bottom: 2px solid lighten($color_bg_modal, 20%)\n\t\t\t&.active\n\t\t\t\topacity: 1\n\t\t\t\t// border-bottom: 2px solid darken($color_bg_modal, 20%)\n\n\tform\n\t\tpadding: 10px\n\t\tinput\n\t\t\tmargin: 0\n\n\t.buttons\n\t\tpadding: 10px\n\t\tmargin-bottom: 0px\n\t\t.button\n\t\t\tmargin-bottom: 0px\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 66123:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ PolyNodeUpdateForm; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.js
var shared_esm_bundler = __webpack_require__(13053);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue?vue&type=template&id=298c1997&ts=true

const _hoisted_1 = { class: "PolyNodeUpdateForm absolute inset-0" };
const _hoisted_2 = { class: "flex flex-col h-full mx-3 mb-4 bt-2 bg-bg text-text" };
const _hoisted_3 = { class: "tabs disable-select" };
const _hoisted_4 = ["id", "onClick"];
const _hoisted_5 = { class: "cell auto" };
const _hoisted_6 = {
  key: 0,
  class: "mt-8 max-w-md mx-auto"
};
const _hoisted_7 = {
  key: 0,
  class: "mt-2 mb-2 mr-3 sm:mt-2 sm:flex sm:flex-row-reverse gap-2 select-none"
};
const _hoisted_8 = /* @__PURE__ */ (0,runtime_core_esm_bundler/* createElementVNode */._)(
  "span",
  { class: "mt-3 inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-text sm:mt-0 sm:w-auto sm:text-sm" },
  "Saving...",
  -1
  /* HOISTED */
);
const _hoisted_9 = [
  _hoisted_8
];
const _hoisted_10 = {
  key: 1,
  class: "mt-2 mb-2 mr-3 sm:mt-2 sm:flex sm:flex-row-reverse gap-2"
};
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_InputsForm = (0,runtime_core_esm_bundler/* resolveComponent */.up)("InputsForm");
  const _component_ParamsEditorCore = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ParamsEditorCore");
  const _component_ModalResizable = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ModalResizable");
  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
    (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ModalResizable, {
      displayed: _ctx.displayed,
      title: _ctx.title,
      ref: "modal",
      size: _ctx.modalSize,
      startPosition: _ctx.modalStartPosition,
      resizable: true,
      onDimensionsUpdated: _ctx.modalDimentionsUpdated
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
        (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_3, [
            ((0,runtime_core_esm_bundler/* openBlock */.wg)(true), (0,runtime_core_esm_bundler/* createElementBlock */.iD)(
              runtime_core_esm_bundler/* Fragment */.HY,
              null,
              (0,runtime_core_esm_bundler/* renderList */.Ko)(_ctx.POLY_NODE_UPDATE_FORM_TABS, (tabName, i) => {
                return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", {
                  id: "polynode-update-form-tab-" + tabName,
                  onClick: ($event) => _ctx.selectTab(i),
                  class: (0,shared_esm_bundler/* normalizeClass */.C_)([
                    _ctx.tabClassObjects[i],
                    "tab border-b-2",
                    _ctx.tabActiveStates[i] ? "border-white" : "border-bg-light"
                  ])
                }, (0,shared_esm_bundler/* toDisplayString */.zw)(tabName), 11, _hoisted_4);
              }),
              256
              /* UNKEYED_FRAGMENT */
            ))
          ]),
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_5, [
            _ctx.isCurrentTabInputs && _ctx.nodeId ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_6, [
              ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_InputsForm, {
                nodeId: _ctx.nodeId,
                key: _ctx.nodeId,
                showSimpleInputNames: true,
                onUpdated: _ctx.updateInputsData
              }, null, 8, ["nodeId", "onUpdated"]))
            ])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true),
            _ctx.isCurrentTabParameters && _ctx.nodeId ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_ParamsEditorCore, {
              key: 1,
              currentNodeId: _ctx.nodeId,
              editSpareParams: false,
              onUpdateParams: _ctx.updateParams
            }, null, 8, ["currentNodeId", "onUpdateParams"])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true),
            (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <PolyNodeMarketplace\n						v-if="isCurrentTabMarketplace && nodeId"\n						:currentNodeId="nodeId"\n					></PolyNodeMarketplace> ')
          ]),
          (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <div class="cell shrink text-right">\n					<div class="buttons">\n						<div class="button clear" id="dialog-prompt-cancel" @click="close">Close</div>\n						<div class="button success" id="dialog-prompt-ok" @click="save">\n							<span v-if="loading">Loading...</span><span v-else>Update</span>\n						</div>\n					</div>\n				</div> '),
          _ctx.loading ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_7, _hoisted_9)) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_10, [
            (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
              id: "polynode-update-form-submit-button",
              type: "button",
              class: "px-12 inline-flex justify-center rounded-md border border-transparent shadow-sm py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 sm:ml-3 sm:w-auto sm:text-sm cursor-pointer",
              onClick: _cache[0] || (_cache[0] = //@ts-ignore
              (...args) => _ctx.save && _ctx.save(...args))
            }, " Save Changes "),
            (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
              id: "polynode-update-form-cancel-button",
              type: "button",
              class: "mt-3 inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-bg-medium hover:bg-bg-dark text-base font-medium text-text hover:text-text-light sm:mt-0 sm:w-auto sm:text-sm cursor-pointer",
              onClick: _cache[1] || (_cache[1] = //@ts-ignore
              (...args) => _ctx.close && _ctx.close(...args))
            }, " Close ")
          ]))
        ])
      ]),
      _: 1
      /* STABLE */
    }, 8, ["displayed", "title", "size", "startPosition", "onDimensionsUpdated"])
  ]);
}

;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue?vue&type=template&id=298c1997&ts=true

// EXTERNAL MODULE: ../src/editor/components/widgets/dialogs/ModalResizable.vue + 5 modules
var ModalResizable = __webpack_require__(68978);
// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../src/editor/components/widgets/paramsEditor/ParamsEditorCore.vue + 101 modules
var ParamsEditorCore = __webpack_require__(48252);
// EXTERNAL MODULE: ../src/editor/components/widgets/dialogs/polyNode/inputs/InputsForm.vue + 15 modules
var InputsForm = __webpack_require__(39641);
// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../src/editor/Editor.ts + 11 modules
var Editor = __webpack_require__(90192);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/engine/nodes/utils/poly/PolyNodeController.ts
var PolyNodeController = __webpack_require__(69941);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/ObjectUtils.ts + 101 modules
var ObjectUtils = __webpack_require__(55237);
// EXTERNAL MODULE: ../src/editor/core/_BasePolyNodeSaveController.ts
var _BasePolyNodeSaveController = __webpack_require__(64656);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/Sleep.ts
var Sleep = __webpack_require__(71820);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/Type.ts
var Type = __webpack_require__(19037);
;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/polyNode/mixins/LocalStorage.ts



const KEY = "polyNodeUpdateForm-modal-info";
function SetupLocalStorage(options) {
  function saveToLocalStorage() {
    const data = {
      modalStartPosition: options.modalStartPosition.value,
      modalSize: options.modalSize.value
    };
    localStorage.setItem(KEY, JSON.stringify(data));
  }
  function clearLocalStorage() {
    localStorage.removeItem(KEY);
  }
  (0,runtime_core_esm_bundler/* watch */.YP)(options.modalStartPosition, saveToLocalStorage, { deep: true });
  (0,runtime_core_esm_bundler/* watch */.YP)(options.modalSize, saveToLocalStorage, { deep: true });
  (0,runtime_core_esm_bundler/* watch */.YP)(options.nodeId, loadFromLocalStorage);
  function loadFromLocalStorage() {
    const current = localStorage.getItem(KEY);
    if (current) {
      try {
        const currentData = JSON.parse(current);
        if (!currentData) {
          return;
        }
        const modalStartPosition = currentData.modalStartPosition;
        const modalSize = currentData.modalStartPosition;
        if (!(modalStartPosition && modalSize)) {
          return;
        }
        if (Type/* CoreType.isNumber */.MR.isNumber(modalStartPosition.x) && !Type/* CoreType.isNaN */.MR.isNaN(modalStartPosition.x)) {
          options.modalStartPosition.value.x = modalStartPosition.x;
        }
        if (Type/* CoreType.isNumber */.MR.isNumber(modalStartPosition.y) && !Type/* CoreType.isNaN */.MR.isNaN(modalStartPosition.y)) {
          options.modalStartPosition.value.y = modalStartPosition.y;
        }
        if (Type/* CoreType.isNumber */.MR.isNumber(modalSize.x) && !Type/* CoreType.isNaN */.MR.isNaN(modalSize.x)) {
          options.modalSize.value.x = modalSize.x;
        }
        if (Type/* CoreType.isNumber */.MR.isNumber(modalSize.y) && !Type/* CoreType.isNaN */.MR.isNaN(modalSize.y)) {
          options.modalSize.value.y = modalSize.y;
        }
      } catch (err) {
      }
    }
  }
  return {
    saveToLocalStorage,
    clearLocalStorage
  };
}

// EXTERNAL MODULE: ../src/editor/components/widgets/paramsEditor/mixins/PopulateParams.ts
var PopulateParams = __webpack_require__(81443);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue?vue&type=script&lang=ts
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};












var PolyNodeUpdateFormTab = /* @__PURE__ */ ((PolyNodeUpdateFormTab2) => {
  PolyNodeUpdateFormTab2["INPUTS"] = "inputs";
  PolyNodeUpdateFormTab2["PARAMETERS"] = "parameters";
  return PolyNodeUpdateFormTab2;
})(PolyNodeUpdateFormTab || {});
const POLY_NODE_UPDATE_FORM_TABS = [
  "inputs" /* INPUTS */,
  "parameters" /* PARAMETERS */
  // PolyNodeUpdateFormTab.MARKETPLACE,
];
/* harmony default export */ var PolyNodeUpdateFormvue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "poly-node-update-form",
  components: { ModalResizable: ModalResizable/* default */.Z, InputsForm: InputsForm/* default */.Z, ParamsEditorCore: ParamsEditorCore/* default */.Z },
  props: {
    urlNodePath: {
      type: String,
      required: true
    }
  },
  setup(props) {
    var _a;
    const controller = StoreController/* StoreController.editor.polyNodeUpdateForm */.F.editor.polyNodeUpdateForm;
    const nodeType = (0,reactivity_esm_bundler/* ref */.iH)("myNode");
    const nodeTypeInput = (0,reactivity_esm_bundler/* ref */.iH)(null);
    const loading = (0,reactivity_esm_bundler/* ref */.iH)(false);
    function _nodeFromProps() {
      return StoreController/* StoreController.scene.node */.F.scene.node(controller.nodeUrlToPath(props.urlNodePath));
    }
    (0,runtime_core_esm_bundler/* onMounted */.bv)(() => {
      if (!_nodeFromProps()) {
        controller.close();
      }
    });
    const nodeId = (0,reactivity_esm_bundler/* ref */.iH)(((_a = _nodeFromProps()) == null ? void 0 : _a.graphNodeId()) || null);
    function _node() {
      if (nodeId.value) {
        const node = StoreController/* StoreController.engine.node */.F.engine.node(nodeId.value);
        if (!node) {
          console.error("polyNodeUpdateForm: node not found");
          return;
        }
        if (node.disposed()) {
          console.error("polyNodeUpdateForm: node is disposed");
          return;
        }
        return node;
      }
    }
    const modalStartPosition = (0,reactivity_esm_bundler/* ref */.iH)({ x: -1, y: -1 });
    const modalSize = (0,reactivity_esm_bundler/* ref */.iH)({ x: 1e3, y: 700 });
    const setupLocalStorage = SetupLocalStorage({ modalStartPosition, modalSize, nodeId });
    function modalDimentionsUpdated(modalStyle) {
      modalStartPosition.value.x = modalStyle.left;
      modalStartPosition.value.y = modalStyle.top;
      modalSize.value.x = modalStyle.width;
      modalSize.value.y = modalStyle.height;
    }
    const currentTabIndex = (0,reactivity_esm_bundler/* ref */.iH)(POLY_NODE_UPDATE_FORM_TABS.indexOf("parameters" /* PARAMETERS */));
    function selectTab(index) {
      currentTabIndex.value = index;
    }
    const currentTabName = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return POLY_NODE_UPDATE_FORM_TABS[currentTabIndex.value];
    });
    const isCurrentTabInputs = (0,runtime_core_esm_bundler/* computed */.Fl)(() => currentTabName.value == "inputs" /* INPUTS */);
    const isCurrentTabParameters = (0,runtime_core_esm_bundler/* computed */.Fl)(() => currentTabName.value == "parameters" /* PARAMETERS */);
    const tabActiveStates = (0,runtime_core_esm_bundler/* computed */.Fl)(
      () => POLY_NODE_UPDATE_FORM_TABS.map((tabName, i) => currentTabIndex.value == i)
    );
    const tabClassObjects = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return POLY_NODE_UPDATE_FORM_TABS.map((tabName, i) => {
        return {
          active: tabActiveStates.value[i]
        };
      });
    });
    const inputsData = (0,reactivity_esm_bundler/* ref */.iH)({});
    function updateInputsData(data) {
      inputsData.value = data;
    }
    function _updateInputsDataFromNode() {
      const node = _node();
      if (!node) {
        console.warn("no node found for _updateInputsDataFromNode");
        return;
      }
      const inputsData2 = PolyNodeController/* PolyNodeController.inputsData */.C.inputsData(node);
      updateInputsData(inputsData2);
    }
    const jsonNode = (0,runtime_core_esm_bundler/* computed */.Fl)(() => nodeId.value ? StoreController/* StoreController.engine.json_node */.F.engine.json_node(nodeId.value) : null);
    const displayed = (0,runtime_core_esm_bundler/* computed */.Fl)(() => nodeId.value != null && jsonNode.value != null);
    const _nodePath = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      var _a2;
      if (jsonNode.value) {
        return (_a2 = _node()) == null ? void 0 : _a2.path();
      }
    });
    (0,runtime_core_esm_bundler/* watch */.YP)(_nodePath, () => setupLocalStorage.clearLocalStorage());
    const title = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      const node = _node();
      if (nodeId.value && node) {
        return `Update Poly Node: ${node.path()}`;
      }
    });
    function _updateData() {
      focusAndSelect();
      _updateInputsDataFromNode();
      _updateParamsDataFromNode();
    }
    function focusAndSelect() {
      (0,runtime_core_esm_bundler/* nextTick */.Y3)(() => {
        var _a2, _b;
        (_a2 = nodeTypeInput.value) == null ? void 0 : _a2.focus();
        (_b = nodeTypeInput.value) == null ? void 0 : _b.select();
      });
    }
    const paramTypesList = (0,reactivity_esm_bundler/* ref */.iH)([]);
    (0,runtime_core_esm_bundler/* watch */.YP)(nodeId, _reset);
    (0,runtime_core_esm_bundler/* onMounted */.bv)(_reset);
    function _updateParamsDataFromNode() {
      const node = _node();
      if (!node) {
        console.warn("no node found in _updateParamsDataFromNode");
        return;
      }
      (0,PopulateParams/* populateParamTypesList */.V)({
        node,
        paramTypesList,
        editSpareParams: false
      });
    }
    function _reset() {
      if (_BasePolyNodeSaveController/* BasePolyNodeSaveController.DEBUG_LEVEL */.g.DEBUG_LEVEL > 2) {
        console.log("PolyNodeUpdateForm: node change", nodeId.value);
      }
      paramTypesList.value.splice(0, paramTypesList.value.length);
      _updateData();
    }
    function updateParams(data) {
      paramTypesList.value.splice(0, paramTypesList.value.length);
      for (let elem of data) {
        paramTypesList.value.push((0,ObjectUtils/* objectCloneDeep */.qI)(elem));
      }
    }
    function save() {
      return __async(this, null, function* () {
        const node = _node();
        if (!node) {
          console.warn("no node to save polynode from");
          return;
        }
        if (nodeType.value.trim().length == 0) {
          alert("nodeType must not be empty");
          return;
        }
        const username = StoreController/* StoreController.editor.currentUser.username */.F.editor.currentUser.username().value || void 0;
        if (loading.value == true) {
          return;
        }
        loading.value = true;
        const clonedInputsData = (0,ObjectUtils/* objectCloneDeep */.qI)(inputsData.value);
        const polyNodeData = {
          node_context: node.context(),
          node_type: node.type(),
          username,
          data: yield PolyNodeController/* PolyNodeController.polyNodeData */.C.polyNodeData(node, clonedInputsData)
        };
        polyNodeData.data.params = polyNodeData.data.params || [];
        polyNodeData.data.params.splice(0, polyNodeData.data.params.length);
        for (let paramType of paramTypesList.value) {
          polyNodeData.data.params.push(paramType);
        }
        const oldNode = node;
        if (_BasePolyNodeSaveController/* BasePolyNodeSaveController.DEBUG_LEVEL */.g.DEBUG_LEVEL > 2) {
        }
        Editor/* Editor.instance */.M.instance().savePolyNode({
          node,
          polyNodeData,
          callback: (newNode) => __async(this, null, function* () {
            yield Sleep/* CoreSleep.sleep */.D.sleep(20);
            loading.value = false;
            if (newNode) {
              if (_BasePolyNodeSaveController/* BasePolyNodeSaveController.DEBUG_LEVEL */.g.DEBUG_LEVEL >= 0) {
                console.log(
                  "polyNode update COMPLETE",
                  oldNode.graphNodeId(),
                  newNode.graphNodeId(),
                  newNode.path()
                );
              }
              controller.show({ node: newNode });
              nodeId.value = newNode.graphNodeId();
            }
          })
        });
      });
    }
    function close() {
      setupLocalStorage.clearLocalStorage();
      controller.close();
    }
    return __spreadProps(__spreadValues({
      displayed,
      nodeId,
      title,
      nodeType,
      nodeTypeInput,
      loading,
      save,
      close,
      // inputs
      updateInputsData,
      // params
      updateParams,
      // tabs
      POLY_NODE_UPDATE_FORM_TABS,
      selectTab,
      tabActiveStates,
      tabClassObjects,
      currentTabName,
      isCurrentTabInputs,
      isCurrentTabParameters
    }, setupLocalStorage), {
      modalDimentionsUpdated,
      modalStartPosition,
      modalSize
      // isCurrentTabMarketplace,
    });
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue?vue&type=style&index=0&id=298c1997&lang=sass
var PolyNodeUpdateFormvue_type_style_index_0_id_298c1997_lang_sass = __webpack_require__(18767);
;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue?vue&type=style&index=0&id=298c1997&lang=sass

// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/widgets/dialogs/polyNode/PolyNodeUpdateForm.vue




;


const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(PolyNodeUpdateFormvue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var PolyNodeUpdateForm = (__exports__);

/***/ }),

/***/ 18767:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(34817);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.id, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = (__webpack_require__(49441)/* ["default"] */ .Z)
var update = add("2adc3c06", content, false, {});
// Hot Module Replacement
if(false) {}

/***/ })

}])
//# sourceMappingURL=src_editor_components_widgets_dialogs_polyNode_PolyNodeUpdateForm_vue.0b292b864ee05fa0d3bc.js.map