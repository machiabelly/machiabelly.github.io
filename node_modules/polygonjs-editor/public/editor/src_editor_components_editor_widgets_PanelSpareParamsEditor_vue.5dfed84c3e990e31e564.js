(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_editor_widgets_PanelSpareParamsEditor_vue"],{

/***/ 47293:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ PanelSpareParamsEditor; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/editor/widgets/PanelSpareParamsEditor.vue?vue&type=template&id=488e2450&ts=true

const _hoisted_1 = {
  key: 0,
  class: "panelSpareParamsEditor absolute inset-0"
};
const _hoisted_2 = { class: "flex flex-col h-full mx-3 mb-4 bt-2 bg-bg text-text" };
const _hoisted_3 = { class: "cell auto" };
const _hoisted_4 = { class: "mt-2 mb-2 mr-3 sm:mt-2 sm:flex sm:flex-row-reverse" };
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_ParamsEditorCore = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ParamsEditorCore");
  const _component_ModalResizable = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ModalResizable");
  return _ctx.displayed ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
    (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ModalResizable, {
      displayed: true,
      title: _ctx.modalTitle,
      ref: "modal",
      size: { x: 800, y: 600 },
      onClose: _ctx.close
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
        (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_2, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_3, [
            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ParamsEditorCore, {
              currentNodeId: _ctx.nodeId,
              editSpareParams: true,
              onUpdateParams: _ctx.updateParams
            }, null, 8, ["currentNodeId", "onUpdateParams"])
          ]),
          (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <div class="cell shrink text-right">\n					<div class="buttons">\n						<div class="button success" @click="save">Accept</div>\n						<div class="button clear" @click="close">Close</div>\n					</div>\n				</div> '),
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_4, [
            (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
              id: "dialog-prompt-ok",
              type: "button",
              class: "inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 sm:ml-3 sm:w-auto sm:text-sm cursor-pointer",
              onClick: _cache[0] || (_cache[0] = //@ts-ignore
              (...args) => _ctx.save && _ctx.save(...args))
            }, " Save Changes "),
            (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
              id: "dialog-prompt-cancel",
              type: "button",
              class: "mt-3 inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-bg-medium hover:bg-bg-dark text-base font-medium text-text hover:text-text-light sm:mt-0 sm:w-auto sm:text-sm cursor-pointer",
              onClick: _cache[1] || (_cache[1] = //@ts-ignore
              (...args) => _ctx.close && _ctx.close(...args))
            }, " Close ")
          ])
        ])
      ]),
      _: 1
      /* STABLE */
    }, 8, ["title", "onClose"])
  ])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true);
}

;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelSpareParamsEditor.vue?vue&type=template&id=488e2450&ts=true

// EXTERNAL MODULE: ../src/editor/components/widgets/dialogs/ModalResizable.vue + 5 modules
var ModalResizable = __webpack_require__(68978);
// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../src/editor/components/widgets/paramsEditor/ParamsEditorCore.vue + 101 modules
var ParamsEditorCore = __webpack_require__(48252);
// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/ObjectUtils.ts + 101 modules
var ObjectUtils = __webpack_require__(55237);
// EXTERNAL MODULE: ../@polygonjs/polygonjs/src/core/ArrayUtils.ts
var ArrayUtils = __webpack_require__(87132);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/editor/widgets/PanelSpareParamsEditor.vue?vue&type=script&lang=ts






/* harmony default export */ var PanelSpareParamsEditorvue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "panel-spare-params-editor",
  components: { ModalResizable: ModalResizable/* default */.Z, ParamsEditorCore: ParamsEditorCore/* default */.Z },
  props: {
    urlNodePath: {
      type: String,
      required: true
    }
  },
  setup(props, context) {
    const controller = StoreController/* StoreController.editor.panelSpareParams */.F.editor.panelSpareParams;
    const node = StoreController/* StoreController.scene.node */.F.scene.node(controller.nodeUrlToPath(props.urlNodePath));
    (0,runtime_core_esm_bundler/* onMounted */.bv)(() => {
      if (!node) {
        controller.close();
      }
    });
    const nodeId = (0,reactivity_esm_bundler/* ref */.iH)(node == null ? void 0 : node.graphNodeId());
    const displayed = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return nodeId.value != null;
    });
    const modalTitle = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      if (!nodeId.value) {
        return;
      }
      const node2 = StoreController/* StoreController.engine.node */.F.engine.node(nodeId.value);
      if (!node2) {
        return;
      }
      return `Spare Params Editor (${node2.path()})`;
    });
    const paramTypesList = (0,reactivity_esm_bundler/* ref */.iH)([]);
    function updateParams(data) {
      paramTypesList.value.splice(0, paramTypesList.value.length);
      for (let elem of data) {
        paramTypesList.value.push((0,ObjectUtils/* objectCloneDeep */.qI)(elem));
      }
    }
    function save() {
      if (!nodeId.value) {
        return;
      }
      const node2 = StoreController/* StoreController.engine.node */.F.engine.node(nodeId.value);
      if (!node2) {
        return;
      }
      const spareParams = node2.params.spare.filter((param) => param.parentParam() == null);
      const spareParamNames = spareParams.map((p) => p.name());
      const paramsToAddNames = paramTypesList.value.map((p) => p.name);
      const namesToDelete = [];
      (0,ArrayUtils/* arrayXOR */.Ir)(spareParamNames, paramsToAddNames, namesToDelete);
      const data = { toAdd: paramTypesList.value, namesToDelete };
      node2.params.updateParams(data);
    }
    function close() {
      controller.close();
    }
    return {
      nodeId,
      displayed,
      modalTitle,
      updateParams,
      // main buttons
      save,
      close
    };
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelSpareParamsEditor.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelSpareParamsEditor.vue




;
const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(PanelSpareParamsEditorvue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var PanelSpareParamsEditor = (__exports__);

/***/ })

}])
//# sourceMappingURL=src_editor_components_editor_widgets_PanelSpareParamsEditor_vue.5dfed84c3e990e31e564.js.map