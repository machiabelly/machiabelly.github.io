(self["webpackChunk"] = self["webpackChunk"] || []).push([["src_editor_components_editor_widgets_PanelObjectMask_vue"],{

/***/ 85231:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

const { createElementVNode: _createElementVNode, openBlock: _openBlock, createElementBlock: _createElementBlock } = __webpack_require__(61043)

module.exports = function render(_ctx, _cache) {
  return (_openBlock(), _createElementBlock("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    "stroke-width": "1.5",
    stroke: "currentColor",
    "aria-hidden": "true"
  }, [
    _createElementVNode("path", {
      "stroke-linecap": "round",
      "stroke-linejoin": "round",
      d: "M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"
    })
  ]))
}

/***/ }),

/***/ 67863:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20559);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93476);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".panelObjectMask .main-panel-files-container{overflow-y:auto}.panelObjectMask .error-container{background-color:#f33;padding:20px}.panelObjectMask .warning-container{background-color:#ffb733;padding:20px}.panelObjectMask .files-list-container{overflow-y:auto}.panelObjectMask .files-list-container .file_paths .file_path{padding:2px 5px}.panelObjectMask .files-list-container .file_paths .file_path:hover{cursor:pointer}.panelObjectMask .files-container-container{padding:2px}.panelObjectMask .buttons{margin-bottom:10px}", "",{"version":3,"sources":["webpack://./../src/editor/components/editor/widgets/PanelObjectMask.vue"],"names":[],"mappings":"AAKC,6CACC,eAAA,CACD,kCACC,qBAAA,CACA,YAAA,CACD,oCACC,wBAAA,CACA,YAAA,CACD,uCACC,eAAA,CAGC,8DACC,eAAA,CAGA,oEACC,cAAA,CAGJ,4CACC,WAAA,CACD,0BACC,kBAAA","sourcesContent":["\n\n// $color_selected: mix($color_bg_modal, $primary-color, 50%)\n// $color_hover: mix($color_bg_modal, $primary-color, 80%)\n.panelObjectMask\n\t.main-panel-files-container\n\t\toverflow-y: auto\n\t.error-container\n\t\tbackground-color: lighten(red, 10%)\n\t\tpadding: 20px\n\t.warning-container\n\t\tbackground-color: lighten(orange, 10%)\n\t\tpadding: 20px\n\t.files-list-container\n\t\toverflow-y: auto\n\t\t// background-color: lighten($color_bg_modal,10%)\n\t\t.file_paths\n\t\t\t.file_path\n\t\t\t\tpadding: 2px 5px\n\t\t\t\t&.selected\n\t\t\t\t\t// background-color: $color_selected\n\t\t\t\t&:hover\n\t\t\t\t\tcursor: pointer\n\t\t\t\t\t// background-color: $color_hover\n\n\t.files-container-container\n\t\tpadding: 2px\n\t.buttons\n\t\tmargin-bottom: 10px\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 34268:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": function() { return /* binding */ PanelObjectMask; }
});

// EXTERNAL MODULE: ../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(88917);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/editor/widgets/PanelObjectMask.vue?vue&type=template&id=3a6a4c82&ts=true

const _hoisted_1 = {
  key: 0,
  class: "panelObjectMask"
};
const _hoisted_2 = {
  key: 0,
  class: "h-full flex flex-col text-white"
};
const _hoisted_3 = {
  key: 1,
  class: "h-full flex flex-col"
};
const _hoisted_4 = {
  key: 2,
  class: "h-full flex flex-col"
};
const _hoisted_5 = { class: "flex-1 overflow-auto" };
const _hoisted_6 = { class: "mt-5 mr-3 sm:mt-4 sm:flex sm:flex-row-reverse shrink" };
function render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_ArrowPathIcon = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ArrowPathIcon");
  const _component_ErrorComponent = (0,runtime_core_esm_bundler/* resolveComponent */.up)("ErrorComponent");
  const _component_SceneTreeCore = (0,runtime_core_esm_bundler/* resolveComponent */.up)("SceneTreeCore");
  const _component_Modal = (0,runtime_core_esm_bundler/* resolveComponent */.up)("Modal");
  return _ctx.displayed ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_1, [
    (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_Modal, {
      fullHeight: true,
      displayed: _ctx.displayed,
      title: "Object Mask:",
      size: { x: 1e3, y: 700 },
      ref: "modal",
      onClose: _ctx.close
    }, {
      default: (0,runtime_core_esm_bundler/* withCtx */.w5)(() => [
        _ctx.loading ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_2, [
          (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ArrowPathIcon, { class: "h-4 animate-spin inline" })
        ])) : _ctx.errorMessage != null ? ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_3, [
          (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_ErrorComponent, {
            title: "Error",
            message: _ctx.errorMessage
          }, null, 8, ["message"])
        ])) : ((0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createElementBlock */.iD)("div", _hoisted_4, [
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_5, [
            (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_SceneTreeCore, {
              maskOnStart: _ctx.maskOnStart,
              onMaskUpdated: _ctx.onMaskUpdated
            }, null, 8, ["maskOnStart", "onMaskUpdated"]),
            (0,runtime_core_esm_bundler/* createCommentVNode */.kq)(' <div class="cell shrink text-right">\n					<div class="buttons">\n						<div class="button success" @click="acceptSelected">Accept</div>\n						<div class="button clear" @click="close">Cancel</div>\n					</div>\n				</div> ')
          ]),
          (0,runtime_core_esm_bundler/* createElementVNode */._)("div", _hoisted_6, [
            (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
              id: "dialog-prompt-ok",
              type: "button",
              class: "w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-16 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 sm:ml-3 sm:w-auto sm:text-sm cursor-pointer",
              onClick: _cache[0] || (_cache[0] = //@ts-ignore
              (...args) => _ctx.acceptSelected && _ctx.acceptSelected(...args))
            }, " Accept "),
            (0,runtime_core_esm_bundler/* createElementVNode */._)("button", {
              id: "dialog-prompt-cancel",
              type: "button",
              class: "mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-bg-medium hover:bg-bg-dark text-base font-medium text-text hover:text-text-light sm:mt-0 sm:w-auto sm:text-sm cursor-pointer",
              onClick: _cache[1] || (_cache[1] = //@ts-ignore
              (...args) => _ctx.close && _ctx.close(...args))
            }, " Cancel ")
          ])
        ]))
      ]),
      _: 1
      /* STABLE */
    }, 8, ["displayed", "onClose"])
  ])) : (0,runtime_core_esm_bundler/* createCommentVNode */.kq)("v-if", true);
}

;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelObjectMask.vue?vue&type=template&id=3a6a4c82&ts=true

// EXTERNAL MODULE: ../src/editor/components/widgets/dialogs/Modal.vue + 5 modules
var Modal = __webpack_require__(31445);
// EXTERNAL MODULE: ../src/editor/store/controllers/StoreController.ts + 44 modules
var StoreController = __webpack_require__(72555);
// EXTERNAL MODULE: ../src/editor/components/panels/sceneTree/tree/SceneTreeCore.vue + 16 modules
var SceneTreeCore = __webpack_require__(39545);
// EXTERNAL MODULE: ../node_modules/@heroicons/vue/24/outline/ArrowPathIcon.js
var ArrowPathIcon = __webpack_require__(85231);
// EXTERNAL MODULE: ../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js + 1 modules
var reactivity_esm_bundler = __webpack_require__(61334);
// EXTERNAL MODULE: ../src/editor/history/commands/ParamSet.ts
var ParamSet = __webpack_require__(42362);
// EXTERNAL MODULE: ../src/editor/Editor.ts + 11 modules
var Editor = __webpack_require__(90192);
// EXTERNAL MODULE: ../src/editor/components/widgets/alert/Error.vue + 4 modules
var Error = __webpack_require__(31655);
;// CONCATENATED MODULE: ../node_modules/esbuild-loader/dist/index.cjs??clonedRuleSet-2.use[0]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/editor/widgets/PanelObjectMask.vue?vue&type=script&lang=ts
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};








/* harmony default export */ var PanelObjectMaskvue_type_script_lang_ts = ((0,runtime_core_esm_bundler/* defineComponent */.aZ)({
  name: "panel-file-selector",
  components: { Modal: Modal/* default */.Z, SceneTreeCore: SceneTreeCore/* default */.Z, ArrowPathIcon: ArrowPathIcon, ErrorComponent: Error/* default */.Z },
  props: {
    urlParamPath: {
      type: String,
      required: true
    }
  },
  setup(props) {
    const controller = StoreController/* StoreController.editor.panelObjectMask */.F.editor.panelObjectMask;
    const param = controller.paramFromUrl(props.urlParamPath);
    (0,runtime_core_esm_bundler/* onMounted */.bv)(() => {
      if (!param) {
        controller.close();
      }
    });
    const paramId = (0,reactivity_esm_bundler/* ref */.iH)(param == null ? void 0 : param.graphNodeId());
    const loading = (0,runtime_core_esm_bundler/* computed */.Fl)(() => controller.loading());
    const errorMessage = (0,runtime_core_esm_bundler/* computed */.Fl)(() => controller.errorMessage());
    const newMask = (0,reactivity_esm_bundler/* ref */.iH)("");
    (0,runtime_core_esm_bundler/* watch */.YP)(paramId, () => {
      newMask.value = maskOnStart.value;
      if (paramId.value != null) {
        _loadNode();
      }
    });
    (0,runtime_core_esm_bundler/* onMounted */.bv)(() => {
      setTimeout(_loadNode, 500);
    });
    function _loadNode() {
      return __async(this, null, function* () {
        if (paramId.value == null) {
          return;
        }
        const param2 = StoreController/* StoreController.engine.param */.F.engine.param(paramId.value);
        if (!param2) {
          return;
        }
        controller.loadNode(param2);
      });
    }
    const displayed = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      return paramId.value != null;
    });
    const maskOnStart = (0,runtime_core_esm_bundler/* computed */.Fl)(() => {
      if (!paramId.value) {
        return "";
      }
      const param2 = StoreController/* StoreController.engine.param */.F.engine.param(paramId.value);
      if (!param2) {
        return "";
      }
      return param2.value;
    });
    function onMaskUpdated(mask) {
      newMask.value = mask;
    }
    function acceptSelected() {
      return __async(this, null, function* () {
        if (!paramId.value) {
          return;
        }
        const param2 = StoreController/* StoreController.engine.param */.F.engine.param(paramId.value);
        if (!param2) {
          return;
        }
        const cmd = new ParamSet/* ParamSetCommand */.O(param2, newMask.value);
        yield Editor/* Editor.instance */.M.instance().pushCommand(cmd);
        close();
      });
    }
    function close() {
      controller.close();
    }
    return {
      paramId,
      displayed,
      loading,
      errorMessage,
      maskOnStart,
      // functions
      onMaskUpdated,
      acceptSelected,
      close
    };
  }
}));

;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelObjectMask.vue?vue&type=script&lang=ts
 
// EXTERNAL MODULE: ../node_modules/vue-style-loader/index.js!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/dist/stylePostLoader.js!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[14].use[0]!../src/editor/components/editor/widgets/PanelObjectMask.vue?vue&type=style&index=0&id=3a6a4c82&lang=sass
var PanelObjectMaskvue_type_style_index_0_id_3a6a4c82_lang_sass = __webpack_require__(95031);
;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelObjectMask.vue?vue&type=style&index=0&id=3a6a4c82&lang=sass

// EXTERNAL MODULE: ../node_modules/vue-loader/dist/exportHelper.js
var exportHelper = __webpack_require__(6959);
;// CONCATENATED MODULE: ../src/editor/components/editor/widgets/PanelObjectMask.vue




;


const __exports__ = /*#__PURE__*/(0,exportHelper/* default */.Z)(PanelObjectMaskvue_type_script_lang_ts, [['render',render]])

/* harmony default export */ var PanelObjectMask = (__exports__);

/***/ }),

/***/ 95031:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(67863);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.id, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = (__webpack_require__(49441)/* ["default"] */ .Z)
var update = add("3ba331fe", content, false, {});
// Hot Module Replacement
if(false) {}

/***/ })

}])
//# sourceMappingURL=src_editor_components_editor_widgets_PanelObjectMask_vue.4a545729da8de0e04c0c.js.map